"use strict";var e,t=require("@web3-react/abstract-connector"),r=(e=require("tiny-invariant"))&&"object"==typeof e&&"default"in e?e.default:e;function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o={1:"mainnet",3:"ropsten",4:"rinkeby",5:"goerli",42:"kovan",100:"xdai"};exports.PortisConnector=function(e){var t,i;function c(t){var i,c=t.dAppId,a=t.networks,s=t.config,u=void 0===s?{}:s,h=a.map((function(e){return"number"==typeof e?e:Number(e.chainId)}));return h.every((function(e){return!!o[e]}))||r(!1),(i=e.call(this,{supportedChainIds:h})||this).dAppId=c,i.networks=a,i.config=u,i.handleOnLogout=i.handleOnLogout.bind(n(i)),i.handleOnActiveWalletChanged=i.handleOnActiveWalletChanged.bind(n(i)),i.handleOnError=i.handleOnError.bind(n(i)),i}i=e,(t=c).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a=c.prototype;return a.handleOnLogout=function(){this.emitDeactivate()},a.handleOnActiveWalletChanged=function(e){this.emitUpdate({account:e})},a.handleOnError=function(e){this.emitError(e)},a.activate=function(){try{var e=function(){return t.portis.onLogout(t.handleOnLogout),t.portis.onActiveWalletChanged(t.handleOnActiveWalletChanged),t.portis.onError(t.handleOnError),Promise.resolve(t.portis.provider.enable().then((function(e){return e[0]}))).then((function(e){return{provider:t.portis.provider,account:e}}))},t=this,r=function(){if(!t.portis)return Promise.resolve(new Promise((function(e){e(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t.default=e,t}(require("@portis/web3")))}))).then((function(e){t.portis=new(0,e.default)(t.dAppId,"number"==typeof t.networks[0]?o[t.networks[0]]:t.networks[0],t.config)}))}();return Promise.resolve(r&&r.then?r.then(e):e())}catch(e){return Promise.reject(e)}},a.getProvider=function(){try{return Promise.resolve(this.portis.provider)}catch(e){return Promise.reject(e)}},a.getChainId=function(){try{return Promise.resolve(this.portis.provider.send("eth_chainId"))}catch(e){return Promise.reject(e)}},a.getAccount=function(){try{return Promise.resolve(this.portis.provider.send("eth_accounts").then((function(e){return e[0]})))}catch(e){return Promise.reject(e)}},a.deactivate=function(){this.portis.onLogout((function(){})),this.portis.onActiveWalletChanged((function(){})),this.portis.onError((function(){}))},a.changeNetwork=function(e,t){try{return"number"==typeof e?(o[e]||r(!1),this.portis.changeNetwork(o[e],t),this.emitUpdate({chainId:e})):(this.portis.changeNetwork(e,t),this.emitUpdate({chainId:Number(e.chainId)})),Promise.resolve()}catch(e){return Promise.reject(e)}},a.close=function(){try{var e=this;return Promise.resolve(e.portis.logout()).then((function(){e.emitDeactivate()}))}catch(e){return Promise.reject(e)}},c}(t.AbstractConnector);
//# sourceMappingURL=portis-connector.cjs.production.min.js.map
