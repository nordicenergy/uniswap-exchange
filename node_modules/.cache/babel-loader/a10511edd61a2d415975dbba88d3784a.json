{"ast":null,"code":"import _slicedToArray from\"/workspace/uniswap-exchange/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/workspace/uniswap-exchange/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject7(){var data=_taggedTemplateLiteral([\"\\n  font-size: 1rem;\\n  outline: none;\\n  border: none;\\n  flex: 1 1 auto;\\n  width: 0;\\n  background-color: \",\";\\n\\n  color: \",\";\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n\\n  ::placeholder {\\n    color: \",\";\\n  }\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n  \",\"\\n  align-items: center;\\n  padding: 0.25rem 0.85rem 0.75rem;\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  flex: 1 1 auto;\\n  width: 0;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  \",\"\\n  align-items: center;\\n  color: \",\";\\n  font-size: 0.75rem;\\n  line-height: 1rem;\\n  padding: 0.75rem 1rem;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  flex: 1;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  border-radius: 1.25rem;\\n  border: 1px solid\\n    \",\";\\n\\n  background-color: \",\";\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  \",\"\\n  box-shadow: 0 4px 8px 0 \",\";\\n  position: relative;\\n  border-radius: 1.25rem;\\n  background-color: \",\";\\n  z-index: 1;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState,useEffect}from\"react\";import styled from\"styled-components\";import{useTranslation}from\"react-i18next\";import{transparentize}from\"polished\";import{isAddress}from\"../../utils\";import{useWeb3React,useDebounce}from\"../../hooks\";var InputPanel=styled.div(_templateObject(),function(_ref){var theme=_ref.theme;return theme.flexColumnNoWrap;},function(_ref2){var theme=_ref2.theme;return transparentize(0.95,theme.shadowColor);},function(_ref3){var theme=_ref3.theme;return theme.inputBackground;});var ContainerRow=styled.div(_templateObject2(),function(_ref4){var error=_ref4.error,theme=_ref4.theme;return error?theme.salmonRed:theme.mercuryGray;},function(_ref5){var theme=_ref5.theme;return theme.inputBackground;});var InputContainer=styled.div(_templateObject3());var LabelRow=styled.div(_templateObject4(),function(_ref6){var theme=_ref6.theme;return theme.flexRowNoWrap;},function(_ref7){var theme=_ref7.theme;return theme.doveGray;});var LabelContainer=styled.div(_templateObject5());var InputRow=styled.div(_templateObject6(),function(_ref8){var theme=_ref8.theme;return theme.flexRowNoWrap;});var Input=styled.input(_templateObject7(),function(_ref9){var theme=_ref9.theme;return theme.inputBackground;},function(_ref10){var error=_ref10.error,theme=_ref10.theme;return error?theme.salmonRed:theme.royalBlue;},function(_ref11){var theme=_ref11.theme;return theme.placeholderGray;});export default function AddressInputPanel(_ref12){var title=_ref12.title,_ref12$initialInput=_ref12.initialInput,initialInput=_ref12$initialInput===void 0?\"\":_ref12$initialInput,_ref12$onChange=_ref12.onChange,onChange=_ref12$onChange===void 0?function(){}:_ref12$onChange,_ref12$onError=_ref12.onError,onError=_ref12$onError===void 0?function(){}:_ref12$onError;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useWeb3React=useWeb3React(),library=_useWeb3React.library;var _useState=useState(initialInput.address?initialInput.address:\"\"),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var debouncedInput=useDebounce(input,150);var _useState3=useState({address:undefined,name:undefined}),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];// keep data and errors in sync\nuseEffect(function(){onChange({address:data.address,name:data.name});},[onChange,data.address,data.name]);useEffect(function(){onError(error);},[onError,error]);// run parser on debounced input\nuseEffect(function(){var stale=false;if(isAddress(debouncedInput)){try{library.lookupAddress(debouncedInput).then(function(name){if(!stale){// if an ENS name exists, set it as the destination\nif(name){setInput(name);}else{setData({address:debouncedInput,name:\"\"});setError(null);}}}).catch(function(){if(!stale){setData({address:debouncedInput,name:\"\"});setError(null);}});}catch(_unused){setData({address:debouncedInput,name:\"\"});setError(null);}}else{if(debouncedInput!==\"\"){try{library.resolveName(debouncedInput).then(function(address){if(!stale){// if the debounced input name resolves to an address\nif(address){setData({address:address,name:debouncedInput});setError(null);}else{setError(true);}}}).catch(function(){if(!stale){setError(true);}});}catch(_unused2){setError(true);}}}return function(){stale=true;};},[debouncedInput,library,onChange,onError]);function onInput(event){if(data.address!==undefined||data.name!==undefined){setData({address:undefined,name:undefined});}if(error!==undefined){setError();}var input=event.target.value;var checksummedInput=isAddress(input);setInput(checksummedInput||input);}return React.createElement(InputPanel,null,React.createElement(ContainerRow,{error:input!==\"\"&&error},React.createElement(InputContainer,null,React.createElement(LabelRow,null,React.createElement(LabelContainer,null,React.createElement(\"span\",null,title||t(\"recipientAddress\")))),React.createElement(InputRow,null,React.createElement(Input,{type:\"text\",autoComplete:\"off\",autoCorrect:\"off\",autoCapitalize:\"off\",spellCheck:\"false\",placeholder:\"0x1234...\",error:input!==\"\"&&error,onChange:onInput,value:input})))));}","map":{"version":3,"sources":["/workspace/uniswap-exchange/src/components/AddressInputPanel/index.js"],"names":["React","useState","useEffect","styled","useTranslation","transparentize","isAddress","useWeb3React","useDebounce","InputPanel","div","theme","flexColumnNoWrap","shadowColor","inputBackground","ContainerRow","error","salmonRed","mercuryGray","InputContainer","LabelRow","flexRowNoWrap","doveGray","LabelContainer","InputRow","Input","input","royalBlue","placeholderGray","AddressInputPanel","title","initialInput","onChange","onError","t","library","address","setInput","debouncedInput","undefined","name","data","setData","setError","stale","lookupAddress","then","catch","resolveName","onInput","event","target","value","checksummedInput"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useTranslation } from \"react-i18next\";\nimport { transparentize } from \"polished\";\n\nimport { isAddress } from \"../../utils\";\nimport { useWeb3React, useDebounce } from \"../../hooks\";\n\nconst InputPanel = styled.div`\n  ${({ theme }) => theme.flexColumnNoWrap}\n  box-shadow: 0 4px 8px 0 ${({ theme }) =>\n    transparentize(0.95, theme.shadowColor)};\n  position: relative;\n  border-radius: 1.25rem;\n  background-color: ${({ theme }) => theme.inputBackground};\n  z-index: 1;\n`;\n\nconst ContainerRow = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 1.25rem;\n  border: 1px solid\n    ${({ error, theme }) => (error ? theme.salmonRed : theme.mercuryGray)};\n\n  background-color: ${({ theme }) => theme.inputBackground};\n`;\n\nconst InputContainer = styled.div`\n  flex: 1;\n`;\n\nconst LabelRow = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap}\n  align-items: center;\n  color: ${({ theme }) => theme.doveGray};\n  font-size: 0.75rem;\n  line-height: 1rem;\n  padding: 0.75rem 1rem;\n`;\n\nconst LabelContainer = styled.div`\n  flex: 1 1 auto;\n  width: 0;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n`;\n\nconst InputRow = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap}\n  align-items: center;\n  padding: 0.25rem 0.85rem 0.75rem;\n`;\n\nconst Input = styled.input`\n  font-size: 1rem;\n  outline: none;\n  border: none;\n  flex: 1 1 auto;\n  width: 0;\n  background-color: ${({ theme }) => theme.inputBackground};\n\n  color: ${({ error, theme }) => (error ? theme.salmonRed : theme.royalBlue)};\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  ::placeholder {\n    color: ${({ theme }) => theme.placeholderGray};\n  }\n`;\n\nexport default function AddressInputPanel({\n  title,\n  initialInput = \"\",\n  onChange = () => {},\n  onError = () => {}\n}) {\n  const { t } = useTranslation();\n\n  const { library } = useWeb3React();\n\n  const [input, setInput] = useState(\n    initialInput.address ? initialInput.address : \"\"\n  );\n\n  const debouncedInput = useDebounce(input, 150);\n\n  const [data, setData] = useState({ address: undefined, name: undefined });\n  const [error, setError] = useState(false);\n\n  // keep data and errors in sync\n  useEffect(() => {\n    onChange({ address: data.address, name: data.name });\n  }, [onChange, data.address, data.name]);\n  useEffect(() => {\n    onError(error);\n  }, [onError, error]);\n\n  // run parser on debounced input\n  useEffect(() => {\n    let stale = false;\n\n    if (isAddress(debouncedInput)) {\n      try {\n        library\n          .lookupAddress(debouncedInput)\n          .then(name => {\n            if (!stale) {\n              // if an ENS name exists, set it as the destination\n              if (name) {\n                setInput(name);\n              } else {\n                setData({ address: debouncedInput, name: \"\" });\n                setError(null);\n              }\n            }\n          })\n          .catch(() => {\n            if (!stale) {\n              setData({ address: debouncedInput, name: \"\" });\n              setError(null);\n            }\n          });\n      } catch {\n        setData({ address: debouncedInput, name: \"\" });\n        setError(null);\n      }\n    } else {\n      if (debouncedInput !== \"\") {\n        try {\n          library\n            .resolveName(debouncedInput)\n            .then(address => {\n              if (!stale) {\n                // if the debounced input name resolves to an address\n                if (address) {\n                  setData({ address: address, name: debouncedInput });\n                  setError(null);\n                } else {\n                  setError(true);\n                }\n              }\n            })\n            .catch(() => {\n              if (!stale) {\n                setError(true);\n              }\n            });\n        } catch {\n          setError(true);\n        }\n      }\n    }\n\n    return () => {\n      stale = true;\n    };\n  }, [debouncedInput, library, onChange, onError]);\n\n  function onInput(event) {\n    if (data.address !== undefined || data.name !== undefined) {\n      setData({ address: undefined, name: undefined });\n    }\n    if (error !== undefined) {\n      setError();\n    }\n    const input = event.target.value;\n    const checksummedInput = isAddress(input);\n    setInput(checksummedInput || input);\n  }\n\n  return (\n    <InputPanel>\n      <ContainerRow error={input !== \"\" && error}>\n        <InputContainer>\n          <LabelRow>\n            <LabelContainer>\n              <span>{title || t(\"recipientAddress\")}</span>\n            </LabelContainer>\n          </LabelRow>\n          <InputRow>\n            <Input\n              type=\"text\"\n              autoComplete=\"off\"\n              autoCorrect=\"off\"\n              autoCapitalize=\"off\"\n              spellCheck=\"false\"\n              placeholder=\"0x1234...\"\n              error={input !== \"\" && error}\n              onChange={onInput}\n              value={input}\n            />\n          </InputRow>\n        </InputContainer>\n      </ContainerRow>\n    </InputPanel>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}