{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _states;\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n} ////////////////////////////////////////////////////////////////////////////////\n// Welcome to @reach/tooltip!\n//\n// Quick definitions:\n//\n// - \"on rest\" or \"rested on\": describes when the element receives mouse hover\n//   after a short delay (and hopefully soon, touch longpress).\n//\n// - \"activation\": describes a mouse click, keyboard enter, or keyboard space.\n//\n// Only one tooltip can be visible at a time, so we use a global state chart to\n// describe the various states and transitions between states that are\n// possible. With the all the timeouts involved with tooltips it's important to\n// \"make impossible states impossible\" with a state machine.\n//\n// It's also okay to use these module globals because you don't server render\n// tooltips. None of the state is changed outside of user events.\n//\n// There are a few features that are important to understand.\n//\n// 1. Tooltips don't show up until the user has rested on one, we don't\n//    want tooltips popupping up as you move your mouse around the page.\n//\n// 2. Once any tooltip becomes visible, other tooltips nearby should skip\n//    resting and display immediately.\n//\n// 3. Tooltips stick around for a little bit after blur/mouseleave.\n//\n// TODO: Research longpress tooltips on Android, iOS\n// - Probably want to position it by default above, since your thumb\n//   is below and would cover it\n// - I'm thinking after longpress, display the tooltip and cancel any click\n//   events. Then on touchend, so they can read it display the tooltip for\n//   a little while longer in case their hand was obstructing the tooltip.\n\n/* eslint-disable default-case */\n\n\nimport React, { Fragment, cloneElement, Children, useState, useRef, forwardRef, useEffect } from \"react\";\nimport { useId } from \"@reach/auto-id\";\nimport { wrapEvent, checkStyles } from \"@reach/utils\";\nimport Portal from \"@reach/portal\";\nimport VisuallyHidden from \"@reach/visually-hidden\";\nimport { useRect } from \"@reach/rect\";\nimport { node, string, func } from \"prop-types\"; ////////////////////////////////////////////////////////////////////////////////\n// ~The states~\n// nothing goin' on\n\nvar IDLE = \"idle\"; // we're considering showing the tooltip, but we're gonna wait a sec\n\nvar FOCUSED = \"focused\"; // IT'S ON\n\nvar VISIBLE = \"visible\"; // Focus has left, but we want to keep it visible for a sec\n\nvar LEAVING_VISIBLE = \"leavingVisible\"; // The user clicked the tool, so we want to hide the thing, we can't just use\n// IDLE because we need to ignore mousemove, etc.\n\nvar DISMISSED = \"dismissed\";\nvar chart = {\n  initial: IDLE,\n  states: (_states = {}, _states[IDLE] = {\n    enter: clearContextId,\n    on: {\n      mouseenter: FOCUSED,\n      focus: VISIBLE\n    }\n  }, _states[FOCUSED] = {\n    enter: startRestTimer,\n    leave: clearRestTimer,\n    on: {\n      mousemove: FOCUSED,\n      mouseleave: IDLE,\n      mousedown: DISMISSED,\n      blur: IDLE,\n      rest: VISIBLE\n    }\n  }, _states[VISIBLE] = {\n    on: {\n      focus: FOCUSED,\n      mouseenter: FOCUSED,\n      mouseleave: LEAVING_VISIBLE,\n      blur: LEAVING_VISIBLE,\n      mousedown: DISMISSED,\n      selectWithKeyboard: DISMISSED,\n      globalMouseMove: LEAVING_VISIBLE\n    }\n  }, _states[LEAVING_VISIBLE] = {\n    enter: startLeavingVisibleTimer,\n    leave: function leave() {\n      clearLeavingVisibleTimer();\n      clearContextId();\n    },\n    on: {\n      mouseenter: VISIBLE,\n      focus: VISIBLE,\n      timecomplete: IDLE\n    }\n  }, _states[DISMISSED] = {\n    leave: function leave() {\n      // allows us to come on back later w/o entering something else first\n      context.id = null;\n    },\n    on: {\n      mouseleave: IDLE,\n      blur: IDLE\n    }\n  }, _states)\n}; // chart context allows us to persist some data around, in Tooltip all we use\n// is the id of the current tooltip being interacted with.\n\nvar context = {\n  id: null\n};\nvar state = chart.initial; ////////////////////////////////////////////////////////////////////////////////\n// Finds the next state from the current state + action. If the chart doesn't\n// describe that transition, it will throw.\n//\n// It also manages lifecycles of the machine, (enter/leave hooks on the state\n// chart)\n\nfunction transition(action, newContext) {\n  var stateDef = chart.states[state];\n  var nextState = stateDef.on[action]; // Really useful for debugging\n  // console.log({ action, state, nextState, contextId: context.id });\n\n  if (!nextState) {\n    throw new Error(\"Unknown state for action \\\"\" + action + \"\\\" from state \\\"\" + state + \"\\\"\");\n  }\n\n  if (stateDef.leave) {\n    stateDef.leave();\n  }\n\n  if (newContext) {\n    context = newContext;\n  }\n\n  var nextDef = chart.states[nextState];\n\n  if (nextDef.enter) {\n    nextDef.enter();\n  }\n\n  state = nextState;\n  notify();\n} ////////////////////////////////////////////////////////////////////////////////\n// Subscriptions:\n//\n// We could require apps to render a <TooltipProvider> around the app and use\n// React context to notify Tooltips of changes to our state machine, instead\n// we manage subscriptions ourselves and simplify the Tooltip API.\n//\n// Maybe if default context could take a hook (instead of just a static value)\n// that was rendered at the root for us, that'd be cool! But it doesn't.\n\n\nvar subscriptions = [];\n\nfunction subscribe(fn) {\n  subscriptions.push(fn);\n  return function () {\n    subscriptions.splice(subscriptions.indexOf(fn), 1);\n  };\n}\n\nfunction notify() {\n  subscriptions.forEach(function (fn) {\n    return fn(state, context);\n  });\n} ////////////////////////////////////////////////////////////////////////////////\n// Timeouts:\n// Manages when the user \"rests\" on an element. Keeps the interface from being\n// flashing tooltips all the time as the user moves the mouse around the screen.\n\n\nvar restTimeout = void 0;\n\nfunction startRestTimer() {\n  clearTimeout(restTimeout);\n  restTimeout = setTimeout(function () {\n    return transition(\"rest\");\n  }, 100);\n}\n\nfunction clearRestTimer() {\n  clearTimeout(restTimeout);\n} // Manages the delay to hide the tooltip after rest leaves.\n\n\nvar leavingVisibleTimer = void 0;\n\nfunction startLeavingVisibleTimer() {\n  clearTimeout(leavingVisibleTimer);\n  leavingVisibleTimer = setTimeout(function () {\n    return transition(\"timecomplete\");\n  }, 500);\n}\n\nfunction clearLeavingVisibleTimer() {\n  clearTimeout(leavingVisibleTimer);\n} // allows us to come on back later w/o entering something else first after the\n// user leaves or dismisses\n\n\nfunction clearContextId() {\n  context.id = null;\n} ////////////////////////////////////////////////////////////////////////////////\n// THE HOOK! It's about time we got to the goods!\n\n\nexport function useTooltip() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      onMouseEnter = _ref.onMouseEnter,\n      onMouseMove = _ref.onMouseMove,\n      onMouseLeave = _ref.onMouseLeave,\n      onFocus = _ref.onFocus,\n      onBlur = _ref.onBlur,\n      onKeyDown = _ref.onKeyDown,\n      onMouseDown = _ref.onMouseDown,\n      ref = _ref.ref,\n      DEBUG_STYLE = _ref.DEBUG_STYLE;\n\n  var id = \"tooltip:\" + useId();\n\n  var _useState = useState(DEBUG_STYLE ? true : context.id === id && state === VISIBLE),\n      isVisible = _useState[0],\n      setIsVisible = _useState[1]; // hopefully they always pass a ref if they ever pass one\n\n\n  var triggerRef = ref || useRef();\n  var triggerRect = useRect(triggerRef, isVisible);\n  useEffect(function () {\n    return subscribe(function () {\n      if (context.id === id && (state === VISIBLE || state === LEAVING_VISIBLE)) {\n        setIsVisible(true);\n      } else {\n        setIsVisible(false);\n      }\n    });\n  }, [id]);\n  useEffect(function () {\n    return checkStyles(\"tooltip\");\n  });\n\n  var handleMouseEnter = function handleMouseEnter() {\n    switch (state) {\n      case IDLE:\n      case VISIBLE:\n      case LEAVING_VISIBLE:\n        {\n          transition(\"mouseenter\", {\n            id: id\n          });\n        }\n    }\n  };\n\n  var handleMouseMove = function handleMouseMove() {\n    switch (state) {\n      case FOCUSED:\n        {\n          transition(\"mousemove\", {\n            id: id\n          });\n        }\n    }\n  };\n\n  var handleFocus = function handleFocus(event) {\n    if (window.__REACH_DISABLE_TOOLTIPS) return;\n\n    switch (state) {\n      case IDLE:\n      case VISIBLE:\n      case LEAVING_VISIBLE:\n        {\n          transition(\"focus\", {\n            id: id\n          });\n        }\n    }\n  };\n\n  var handleMouseLeave = function handleMouseLeave() {\n    switch (state) {\n      case FOCUSED:\n      case VISIBLE:\n      case DISMISSED:\n        {\n          transition(\"mouseleave\");\n        }\n    }\n  };\n\n  var handleBlur = function handleBlur() {\n    // Allow quick click from one tool to another\n    if (context.id !== id) return;\n\n    switch (state) {\n      case FOCUSED:\n      case VISIBLE:\n      case DISMISSED:\n        {\n          transition(\"blur\");\n        }\n    }\n  };\n\n  var handleMouseDown = function handleMouseDown() {\n    // Allow quick click from one tool to another\n    if (context.id !== id) return;\n\n    switch (state) {\n      case FOCUSED:\n      case VISIBLE:\n        {\n          transition(\"mousedown\");\n        }\n    }\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    if (event.key === \"Enter\" || event.key === \" \") {\n      switch (state) {\n        case VISIBLE:\n          {\n            transition(\"selectWithKeyboard\");\n          }\n      }\n    }\n  };\n\n  var trigger = {\n    \"aria-describedby\": id,\n    \"data-reach-tooltip-trigger\": \"\",\n    ref: triggerRef,\n    onMouseEnter: wrapEvent(onMouseEnter, handleMouseEnter),\n    onMouseMove: wrapEvent(onMouseMove, handleMouseMove),\n    onFocus: wrapEvent(onFocus, handleFocus),\n    onBlur: wrapEvent(onFocus, handleBlur),\n    onMouseLeave: wrapEvent(onMouseLeave, handleMouseLeave),\n    onKeyDown: wrapEvent(onKeyDown, handleKeyDown),\n    onMouseDown: wrapEvent(onMouseDown, handleMouseDown)\n  };\n  var tooltip = {\n    id: id,\n    triggerRect: triggerRect,\n    isVisible: isVisible\n  };\n  return [trigger, tooltip, isVisible];\n} ////////////////////////////////////////////////////////////////////////////////\n\nexport default function Tooltip(_ref2) {\n  var children = _ref2.children,\n      label = _ref2.label,\n      ariaLabel = _ref2.ariaLabel,\n      DEBUG_STYLE = _ref2.DEBUG_STYLE,\n      rest = _objectWithoutProperties(_ref2, [\"children\", \"label\", \"ariaLabel\", \"DEBUG_STYLE\"]);\n\n  var _useTooltip = useTooltip({\n    DEBUG_STYLE: DEBUG_STYLE\n  }),\n      trigger = _useTooltip[0],\n      tooltip = _useTooltip[1];\n\n  return React.createElement(Fragment, null, cloneElement(Children.only(children), trigger), React.createElement(TooltipPopup, _extends({\n    label: label,\n    ariaLabel: ariaLabel\n  }, tooltip, rest)));\n}\nprocess.env.NODE_ENV !== \"production\" ? Tooltip.propTypes = {\n  children: node.isRequired,\n  label: node.isRequired,\n  ariaLabel: string\n} : void 0; ////////////////////////////////////////////////////////////////////////////////\n\nvar TooltipPopup = forwardRef(function TooltipPopup(_ref3, forwardRef) {\n  var label = _ref3.label,\n      ariaLabel = _ref3.ariaLabel,\n      position = _ref3.position,\n      isVisible = _ref3.isVisible,\n      id = _ref3.id,\n      triggerRect = _ref3.triggerRect,\n      rest = _objectWithoutProperties(_ref3, [\"label\", \"ariaLabel\", \"position\", \"isVisible\", \"id\", \"triggerRect\"]);\n\n  return isVisible ? React.createElement(Portal, null, React.createElement(TooltipContent, _extends({\n    label: label,\n    ariaLabel: ariaLabel,\n    position: position,\n    isVisible: isVisible,\n    id: id,\n    triggerRect: triggerRect,\n    ref: forwardRef\n  }, rest))) : null;\n});\nexport { TooltipPopup };\nprocess.env.NODE_ENV !== \"production\" ? TooltipPopup.propTypes = {\n  label: node.isRequired,\n  ariaLabel: string,\n  position: func\n} : void 0; // Need a separate component so that useRect works inside the portal\n\nvar TooltipContent = forwardRef(function TooltipContent(_ref4, forwardRef) {\n  var label = _ref4.label,\n      ariaLabel = _ref4.ariaLabel,\n      _ref4$position = _ref4.position,\n      position = _ref4$position === undefined ? positionDefault : _ref4$position,\n      isVisible = _ref4.isVisible,\n      id = _ref4.id,\n      triggerRect = _ref4.triggerRect,\n      style = _ref4.style,\n      rest = _objectWithoutProperties(_ref4, [\"label\", \"ariaLabel\", \"position\", \"isVisible\", \"id\", \"triggerRect\", \"style\"]);\n\n  var useAriaLabel = ariaLabel != null;\n  var tooltipRef = useRef();\n  var tooltipRect = useRect(tooltipRef, isVisible);\n  return React.createElement(Fragment, null, React.createElement(\"div\", _extends({\n    \"data-reach-tooltip\": true,\n    role: useAriaLabel ? undefined : \"tooltip\",\n    id: useAriaLabel ? undefined : id,\n    children: label,\n    style: _extends({}, style, getStyles(position, triggerRect, tooltipRect)),\n    ref: function ref(node) {\n      tooltipRef.current = node;\n      if (forwardRef) forwardRef(node);\n    }\n  }, rest)), useAriaLabel && React.createElement(VisuallyHidden, {\n    role: \"tooltip\",\n    id: id\n  }, ariaLabel));\n}); // feels awkward when it's perfectly aligned w/ the trigger\n\nvar OFFSET = 8;\n\nvar getStyles = function getStyles(position, triggerRect, tooltipRect) {\n  var haventMeasuredTooltipYet = !tooltipRect;\n\n  if (haventMeasuredTooltipYet) {\n    return {\n      visibility: \"hidden\"\n    };\n  }\n\n  return position(triggerRect, tooltipRect);\n};\n\nvar positionDefault = function positionDefault(triggerRect, tooltipRect) {\n  var styles = {\n    left: triggerRect.left + window.pageXOffset + \"px\",\n    top: triggerRect.top + triggerRect.height + window.pageYOffset + \"px\"\n  };\n  var collisions = {\n    top: triggerRect.top - tooltipRect.height < 0,\n    right: window.innerWidth < triggerRect.left + tooltipRect.width,\n    bottom: window.innerHeight < triggerRect.bottom + tooltipRect.height + OFFSET,\n    left: triggerRect.left - tooltipRect.width < 0\n  };\n  var directionRight = collisions.right && !collisions.left;\n  var directionUp = collisions.bottom && !collisions.top;\n  return _extends({}, styles, {\n    left: directionRight ? triggerRect.right - tooltipRect.width + window.pageXOffset + \"px\" : triggerRect.left + window.pageXOffset + \"px\",\n    top: directionUp ? triggerRect.top - OFFSET - tooltipRect.height + window.pageYOffset + \"px\" : triggerRect.top + OFFSET + triggerRect.height + window.pageYOffset + \"px\"\n  });\n};","map":{"version":3,"sources":["/workspace/uniswap-exchange/node_modules/@reach/tooltip/es/index.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_states","_objectWithoutProperties","obj","keys","indexOf","React","Fragment","cloneElement","Children","useState","useRef","forwardRef","useEffect","useId","wrapEvent","checkStyles","Portal","VisuallyHidden","useRect","node","string","func","IDLE","FOCUSED","VISIBLE","LEAVING_VISIBLE","DISMISSED","chart","initial","states","enter","clearContextId","on","mouseenter","focus","startRestTimer","leave","clearRestTimer","mousemove","mouseleave","mousedown","blur","rest","selectWithKeyboard","globalMouseMove","startLeavingVisibleTimer","clearLeavingVisibleTimer","timecomplete","context","id","state","transition","action","newContext","stateDef","nextState","Error","nextDef","notify","subscriptions","subscribe","fn","push","splice","forEach","restTimeout","clearTimeout","setTimeout","leavingVisibleTimer","useTooltip","_ref","undefined","onMouseEnter","onMouseMove","onMouseLeave","onFocus","onBlur","onKeyDown","onMouseDown","ref","DEBUG_STYLE","_useState","isVisible","setIsVisible","triggerRef","triggerRect","handleMouseEnter","handleMouseMove","handleFocus","event","window","__REACH_DISABLE_TOOLTIPS","handleMouseLeave","handleBlur","handleMouseDown","handleKeyDown","trigger","tooltip","Tooltip","_ref2","children","label","ariaLabel","_useTooltip","createElement","only","TooltipPopup","process","env","NODE_ENV","propTypes","isRequired","_ref3","position","TooltipContent","_ref4","_ref4$position","positionDefault","style","useAriaLabel","tooltipRef","tooltipRect","role","getStyles","current","OFFSET","haventMeasuredTooltipYet","visibility","styles","left","pageXOffset","top","height","pageYOffset","collisions","right","innerWidth","width","bottom","innerHeight","directionRight","directionUp"],"mappings":"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","sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _states;\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\n////////////////////////////////////////////////////////////////////////////////\n// Welcome to @reach/tooltip!\n//\n// Quick definitions:\n//\n// - \"on rest\" or \"rested on\": describes when the element receives mouse hover\n//   after a short delay (and hopefully soon, touch longpress).\n//\n// - \"activation\": describes a mouse click, keyboard enter, or keyboard space.\n//\n// Only one tooltip can be visible at a time, so we use a global state chart to\n// describe the various states and transitions between states that are\n// possible. With the all the timeouts involved with tooltips it's important to\n// \"make impossible states impossible\" with a state machine.\n//\n// It's also okay to use these module globals because you don't server render\n// tooltips. None of the state is changed outside of user events.\n//\n// There are a few features that are important to understand.\n//\n// 1. Tooltips don't show up until the user has rested on one, we don't\n//    want tooltips popupping up as you move your mouse around the page.\n//\n// 2. Once any tooltip becomes visible, other tooltips nearby should skip\n//    resting and display immediately.\n//\n// 3. Tooltips stick around for a little bit after blur/mouseleave.\n//\n// TODO: Research longpress tooltips on Android, iOS\n// - Probably want to position it by default above, since your thumb\n//   is below and would cover it\n// - I'm thinking after longpress, display the tooltip and cancel any click\n//   events. Then on touchend, so they can read it display the tooltip for\n//   a little while longer in case their hand was obstructing the tooltip.\n\n/* eslint-disable default-case */\n\nimport React, { Fragment, cloneElement, Children, useState, useRef, forwardRef, useEffect } from \"react\";\nimport { useId } from \"@reach/auto-id\";\nimport { wrapEvent, checkStyles } from \"@reach/utils\";\nimport Portal from \"@reach/portal\";\nimport VisuallyHidden from \"@reach/visually-hidden\";\nimport { useRect } from \"@reach/rect\";\nimport { node, string, func } from \"prop-types\";\n\n////////////////////////////////////////////////////////////////////////////////\n// ~The states~\n\n// nothing goin' on\nvar IDLE = \"idle\";\n\n// we're considering showing the tooltip, but we're gonna wait a sec\nvar FOCUSED = \"focused\";\n\n// IT'S ON\nvar VISIBLE = \"visible\";\n\n// Focus has left, but we want to keep it visible for a sec\nvar LEAVING_VISIBLE = \"leavingVisible\";\n\n// The user clicked the tool, so we want to hide the thing, we can't just use\n// IDLE because we need to ignore mousemove, etc.\nvar DISMISSED = \"dismissed\";\n\nvar chart = {\n  initial: IDLE,\n  states: (_states = {}, _states[IDLE] = {\n    enter: clearContextId,\n    on: {\n      mouseenter: FOCUSED,\n      focus: VISIBLE\n    }\n  }, _states[FOCUSED] = {\n    enter: startRestTimer,\n    leave: clearRestTimer,\n    on: {\n      mousemove: FOCUSED,\n      mouseleave: IDLE,\n      mousedown: DISMISSED,\n      blur: IDLE,\n      rest: VISIBLE\n    }\n  }, _states[VISIBLE] = {\n    on: {\n      focus: FOCUSED,\n      mouseenter: FOCUSED,\n      mouseleave: LEAVING_VISIBLE,\n      blur: LEAVING_VISIBLE,\n      mousedown: DISMISSED,\n      selectWithKeyboard: DISMISSED,\n      globalMouseMove: LEAVING_VISIBLE\n    }\n  }, _states[LEAVING_VISIBLE] = {\n    enter: startLeavingVisibleTimer,\n    leave: function leave() {\n      clearLeavingVisibleTimer();\n      clearContextId();\n    },\n    on: {\n      mouseenter: VISIBLE,\n      focus: VISIBLE,\n      timecomplete: IDLE\n    }\n  }, _states[DISMISSED] = {\n    leave: function leave() {\n      // allows us to come on back later w/o entering something else first\n      context.id = null;\n    },\n    on: {\n      mouseleave: IDLE,\n      blur: IDLE\n    }\n  }, _states)\n};\n\n// chart context allows us to persist some data around, in Tooltip all we use\n// is the id of the current tooltip being interacted with.\nvar context = { id: null };\nvar state = chart.initial;\n\n////////////////////////////////////////////////////////////////////////////////\n// Finds the next state from the current state + action. If the chart doesn't\n// describe that transition, it will throw.\n//\n// It also manages lifecycles of the machine, (enter/leave hooks on the state\n// chart)\nfunction transition(action, newContext) {\n  var stateDef = chart.states[state];\n  var nextState = stateDef.on[action];\n\n  // Really useful for debugging\n  // console.log({ action, state, nextState, contextId: context.id });\n\n  if (!nextState) {\n    throw new Error(\"Unknown state for action \\\"\" + action + \"\\\" from state \\\"\" + state + \"\\\"\");\n  }\n\n  if (stateDef.leave) {\n    stateDef.leave();\n  }\n\n  if (newContext) {\n    context = newContext;\n  }\n\n  var nextDef = chart.states[nextState];\n  if (nextDef.enter) {\n    nextDef.enter();\n  }\n\n  state = nextState;\n  notify();\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// Subscriptions:\n//\n// We could require apps to render a <TooltipProvider> around the app and use\n// React context to notify Tooltips of changes to our state machine, instead\n// we manage subscriptions ourselves and simplify the Tooltip API.\n//\n// Maybe if default context could take a hook (instead of just a static value)\n// that was rendered at the root for us, that'd be cool! But it doesn't.\nvar subscriptions = [];\n\nfunction subscribe(fn) {\n  subscriptions.push(fn);\n  return function () {\n    subscriptions.splice(subscriptions.indexOf(fn), 1);\n  };\n}\n\nfunction notify() {\n  subscriptions.forEach(function (fn) {\n    return fn(state, context);\n  });\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// Timeouts:\n\n// Manages when the user \"rests\" on an element. Keeps the interface from being\n// flashing tooltips all the time as the user moves the mouse around the screen.\nvar restTimeout = void 0;\n\nfunction startRestTimer() {\n  clearTimeout(restTimeout);\n  restTimeout = setTimeout(function () {\n    return transition(\"rest\");\n  }, 100);\n}\n\nfunction clearRestTimer() {\n  clearTimeout(restTimeout);\n}\n\n// Manages the delay to hide the tooltip after rest leaves.\nvar leavingVisibleTimer = void 0;\n\nfunction startLeavingVisibleTimer() {\n  clearTimeout(leavingVisibleTimer);\n  leavingVisibleTimer = setTimeout(function () {\n    return transition(\"timecomplete\");\n  }, 500);\n}\n\nfunction clearLeavingVisibleTimer() {\n  clearTimeout(leavingVisibleTimer);\n}\n\n// allows us to come on back later w/o entering something else first after the\n// user leaves or dismisses\nfunction clearContextId() {\n  context.id = null;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// THE HOOK! It's about time we got to the goods!\nexport function useTooltip() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      onMouseEnter = _ref.onMouseEnter,\n      onMouseMove = _ref.onMouseMove,\n      onMouseLeave = _ref.onMouseLeave,\n      onFocus = _ref.onFocus,\n      onBlur = _ref.onBlur,\n      onKeyDown = _ref.onKeyDown,\n      onMouseDown = _ref.onMouseDown,\n      ref = _ref.ref,\n      DEBUG_STYLE = _ref.DEBUG_STYLE;\n\n  var id = \"tooltip:\" + useId();\n\n  var _useState = useState(DEBUG_STYLE ? true : context.id === id && state === VISIBLE),\n      isVisible = _useState[0],\n      setIsVisible = _useState[1];\n\n  // hopefully they always pass a ref if they ever pass one\n\n\n  var triggerRef = ref || useRef();\n  var triggerRect = useRect(triggerRef, isVisible);\n\n  useEffect(function () {\n    return subscribe(function () {\n      if (context.id === id && (state === VISIBLE || state === LEAVING_VISIBLE)) {\n        setIsVisible(true);\n      } else {\n        setIsVisible(false);\n      }\n    });\n  }, [id]);\n\n  useEffect(function () {\n    return checkStyles(\"tooltip\");\n  });\n\n  var handleMouseEnter = function handleMouseEnter() {\n    switch (state) {\n      case IDLE:\n      case VISIBLE:\n      case LEAVING_VISIBLE:\n        {\n          transition(\"mouseenter\", { id: id });\n        }\n    }\n  };\n\n  var handleMouseMove = function handleMouseMove() {\n    switch (state) {\n      case FOCUSED:\n        {\n          transition(\"mousemove\", { id: id });\n        }\n    }\n  };\n\n  var handleFocus = function handleFocus(event) {\n    if (window.__REACH_DISABLE_TOOLTIPS) return;\n    switch (state) {\n      case IDLE:\n      case VISIBLE:\n      case LEAVING_VISIBLE:\n        {\n          transition(\"focus\", { id: id });\n        }\n    }\n  };\n\n  var handleMouseLeave = function handleMouseLeave() {\n    switch (state) {\n      case FOCUSED:\n      case VISIBLE:\n      case DISMISSED:\n        {\n          transition(\"mouseleave\");\n        }\n    }\n  };\n\n  var handleBlur = function handleBlur() {\n    // Allow quick click from one tool to another\n    if (context.id !== id) return;\n    switch (state) {\n      case FOCUSED:\n      case VISIBLE:\n      case DISMISSED:\n        {\n          transition(\"blur\");\n        }\n    }\n  };\n\n  var handleMouseDown = function handleMouseDown() {\n    // Allow quick click from one tool to another\n    if (context.id !== id) return;\n    switch (state) {\n      case FOCUSED:\n      case VISIBLE:\n        {\n          transition(\"mousedown\");\n        }\n    }\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    if (event.key === \"Enter\" || event.key === \" \") {\n      switch (state) {\n        case VISIBLE:\n          {\n            transition(\"selectWithKeyboard\");\n          }\n      }\n    }\n  };\n\n  var trigger = {\n    \"aria-describedby\": id,\n    \"data-reach-tooltip-trigger\": \"\",\n    ref: triggerRef,\n    onMouseEnter: wrapEvent(onMouseEnter, handleMouseEnter),\n    onMouseMove: wrapEvent(onMouseMove, handleMouseMove),\n    onFocus: wrapEvent(onFocus, handleFocus),\n    onBlur: wrapEvent(onFocus, handleBlur),\n    onMouseLeave: wrapEvent(onMouseLeave, handleMouseLeave),\n    onKeyDown: wrapEvent(onKeyDown, handleKeyDown),\n    onMouseDown: wrapEvent(onMouseDown, handleMouseDown)\n  };\n\n  var tooltip = {\n    id: id,\n    triggerRect: triggerRect,\n    isVisible: isVisible\n  };\n\n  return [trigger, tooltip, isVisible];\n}\n\n////////////////////////////////////////////////////////////////////////////////\nexport default function Tooltip(_ref2) {\n  var children = _ref2.children,\n      label = _ref2.label,\n      ariaLabel = _ref2.ariaLabel,\n      DEBUG_STYLE = _ref2.DEBUG_STYLE,\n      rest = _objectWithoutProperties(_ref2, [\"children\", \"label\", \"ariaLabel\", \"DEBUG_STYLE\"]);\n\n  var _useTooltip = useTooltip({ DEBUG_STYLE: DEBUG_STYLE }),\n      trigger = _useTooltip[0],\n      tooltip = _useTooltip[1];\n\n  return React.createElement(\n    Fragment,\n    null,\n    cloneElement(Children.only(children), trigger),\n    React.createElement(TooltipPopup, _extends({\n      label: label,\n      ariaLabel: ariaLabel\n    }, tooltip, rest))\n  );\n}\n\nprocess.env.NODE_ENV !== \"production\" ? Tooltip.propTypes = {\n  children: node.isRequired,\n  label: node.isRequired,\n  ariaLabel: string\n} : void 0;\n\n////////////////////////////////////////////////////////////////////////////////\nvar TooltipPopup = forwardRef(function TooltipPopup(_ref3, forwardRef) {\n  var label = _ref3.label,\n      ariaLabel = _ref3.ariaLabel,\n      position = _ref3.position,\n      isVisible = _ref3.isVisible,\n      id = _ref3.id,\n      triggerRect = _ref3.triggerRect,\n      rest = _objectWithoutProperties(_ref3, [\"label\", \"ariaLabel\", \"position\", \"isVisible\", \"id\", \"triggerRect\"]);\n\n  return isVisible ? React.createElement(\n    Portal,\n    null,\n    React.createElement(TooltipContent, _extends({\n      label: label,\n      ariaLabel: ariaLabel,\n      position: position,\n      isVisible: isVisible,\n      id: id,\n      triggerRect: triggerRect,\n      ref: forwardRef\n    }, rest))\n  ) : null;\n});\n\nexport { TooltipPopup };\nprocess.env.NODE_ENV !== \"production\" ? TooltipPopup.propTypes = {\n  label: node.isRequired,\n  ariaLabel: string,\n  position: func\n} : void 0;\n\n// Need a separate component so that useRect works inside the portal\nvar TooltipContent = forwardRef(function TooltipContent(_ref4, forwardRef) {\n  var label = _ref4.label,\n      ariaLabel = _ref4.ariaLabel,\n      _ref4$position = _ref4.position,\n      position = _ref4$position === undefined ? positionDefault : _ref4$position,\n      isVisible = _ref4.isVisible,\n      id = _ref4.id,\n      triggerRect = _ref4.triggerRect,\n      style = _ref4.style,\n      rest = _objectWithoutProperties(_ref4, [\"label\", \"ariaLabel\", \"position\", \"isVisible\", \"id\", \"triggerRect\", \"style\"]);\n\n  var useAriaLabel = ariaLabel != null;\n  var tooltipRef = useRef();\n  var tooltipRect = useRect(tooltipRef, isVisible);\n  return React.createElement(\n    Fragment,\n    null,\n    React.createElement(\"div\", _extends({\n      \"data-reach-tooltip\": true,\n      role: useAriaLabel ? undefined : \"tooltip\",\n      id: useAriaLabel ? undefined : id,\n      children: label,\n      style: _extends({}, style, getStyles(position, triggerRect, tooltipRect)),\n      ref: function ref(node) {\n        tooltipRef.current = node;\n        if (forwardRef) forwardRef(node);\n      }\n    }, rest)),\n    useAriaLabel && React.createElement(\n      VisuallyHidden,\n      { role: \"tooltip\", id: id },\n      ariaLabel\n    )\n  );\n});\n\n// feels awkward when it's perfectly aligned w/ the trigger\nvar OFFSET = 8;\n\nvar getStyles = function getStyles(position, triggerRect, tooltipRect) {\n  var haventMeasuredTooltipYet = !tooltipRect;\n  if (haventMeasuredTooltipYet) {\n    return { visibility: \"hidden\" };\n  }\n  return position(triggerRect, tooltipRect);\n};\n\nvar positionDefault = function positionDefault(triggerRect, tooltipRect) {\n  var styles = {\n    left: triggerRect.left + window.pageXOffset + \"px\",\n    top: triggerRect.top + triggerRect.height + window.pageYOffset + \"px\"\n  };\n\n  var collisions = {\n    top: triggerRect.top - tooltipRect.height < 0,\n    right: window.innerWidth < triggerRect.left + tooltipRect.width,\n    bottom: window.innerHeight < triggerRect.bottom + tooltipRect.height + OFFSET,\n    left: triggerRect.left - tooltipRect.width < 0\n  };\n\n  var directionRight = collisions.right && !collisions.left;\n  var directionUp = collisions.bottom && !collisions.top;\n\n  return _extends({}, styles, {\n    left: directionRight ? triggerRect.right - tooltipRect.width + window.pageXOffset + \"px\" : triggerRect.left + window.pageXOffset + \"px\",\n    top: directionUp ? triggerRect.top - OFFSET - tooltipRect.height + window.pageYOffset + \"px\" : triggerRect.top + OFFSET + triggerRect.height + window.pageYOffset + \"px\"\n  });\n};"]},"metadata":{},"sourceType":"module"}