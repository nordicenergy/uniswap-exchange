{"ast":null,"code":"import _regeneratorRuntime from\"/workspace/uniswap-exchange/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/workspace/uniswap-exchange/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/workspace/uniswap-exchange/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/workspace/uniswap-exchange/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject18(){var data=_taggedTemplateLiteral([\"\\n  margin: 0 0.25rem 0 0.25rem;\\n\"]);_templateObject18=function _templateObject18(){return data;};return data;}function _templateObject17(){var data=_taggedTemplateLiteral([\"\\n  \",\"\\n  align-items: center;\\n  padding: 1rem 1.5rem;\\n  margin: 0.25rem 0.5rem;\\n  justify-content: space-between;\\n  cursor: pointer;\\n  user-select: none;\\n\\n  #symbol {\\n    color: \",\";\\n  }\\n\\n  :hover {\\n    background-color: \",\";\\n  }\\n\"]);_templateObject17=function _templateObject17(){return data;};return data;}function _templateObject16(){var data=_taggedTemplateLiteral([\"\\n  flex-grow: 1;\\n  height: 100%;\\n  overflow-y: auto;\\n\"]);_templateObject16=function _templateObject16(){return data;};return data;}function _templateObject15(){var data=_taggedTemplateLiteral([\"\\n  \",\"\\n  align-items: center;\\n  padding: 1rem 1.5rem;\\n  margin: 0.25rem 0.5rem;\\n  justify-content: center;\\n  user-select: none;\\n\"]);_templateObject15=function _templateObject15(){return data;};return data;}function _templateObject14(){var data=_taggedTemplateLiteral([\"\\n  \",\"\\n  padding: 1rem;\\n  border-bottom: 1px solid \",\";\\n\"]);_templateObject14=function _templateObject14(){return data;};return data;}function _templateObject13(){var data=_taggedTemplateLiteral([\"\\n  \",\"\\n  background-color: \",\";\\n  width: 100%;\\n\"]);_templateObject13=function _templateObject13(){return data;};return data;}function _templateObject12(){var data=_taggedTemplateLiteral([\"\\n  color: \",\";\\n  :hover {\\n    cursor: pointer;\\n    color: \",\";\\n  }\\n\"]);_templateObject12=function _templateObject12(){return data;};return data;}function _templateObject11(){var data=_taggedTemplateLiteral([\"\\n  flex: 1 1 auto;\\n  width: 0;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n\"]);_templateObject11=function _templateObject11(){return data;};return data;}function _templateObject10(){var data=_taggedTemplateLiteral([\"\\n  \",\"\\n  align-items: center;\\n  color: \",\";\\n  font-size: 0.75rem;\\n  line-height: 1rem;\\n  padding: 0.75rem 1rem;\\n  span:hover {\\n    cursor: pointer;\\n    color: \",\";\\n  }\\n\"]);_templateObject10=function _templateObject10(){return data;};return data;}function _templateObject9(){var data=_taggedTemplateLiteral([\"\\n  border-radius: 1.25rem;\\n  box-shadow: 0 0 0 0.5px \",\";\\n  background-color: \",\";\\n  transition: box-shadow 200ms ease-in-out;\\n\\n  :focus-within {\\n    box-shadow: 0 0 0.5px 0.5px \",\";\\n  }\\n\"]);_templateObject9=function _templateObject9(){return data;};return data;}function _templateObject8(){var data=_taggedTemplateLiteral([\"\\n  \",\"\\n  box-shadow: 0 4px 8px 0 \",\";\\n  position: relative;\\n  border-radius: 1.25rem;\\n  background-color: \",\";\\n  z-index: 1;\\n\"]);_templateObject8=function _templateObject8(){return data;};return data;}function _templateObject7(){var data=_taggedTemplateLiteral([\"\\n  margin: 0 0.5rem 0 0.5rem;\\n  height: 35%;\\n\\n  path {\\n    stroke: \",\";\\n  }\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  font-size: 1rem;\\n  color: \",\";\\n  height: 2rem;\\n  border: 1px solid \",\";\\n  border-radius: 2.5rem;\\n  background-color: \",\";\\n  outline: none;\\n  cursor: pointer;\\n  user-select: none;\\n\\n  :hover {\\n    border: 1px solid\\n      \",\";\\n  }\\n\\n  :focus {\\n    box-shadow: 0 0 0.5px 0.5px \",\";\\n  }\\n\\n  :active {\\n    background-color: \",\";\\n  }\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  min-height: 1.75rem;\\n  flex-shrink: 0;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  font-size: 1.5rem;\\n  color: \",\";\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  \",\"\\n  align-items: center;\\n  padding: 0.25rem 0.85rem 0.75rem;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  \",\"\\n  background: \",\";\\n  border: 1px solid \",\";\\n  color: \",\";\\n  line-height: 0;\\n  height: 2rem;\\n  padding: 10px 50px 10px 15px;\\n  margin-right: -40px;\\n  border-radius: 2.5rem;\\n  outline: none;\\n  cursor: pointer;\\n  user-select: none;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState,useRef,useMemo}from'react';import{Link}from'react-router-dom';import{useTranslation}from'react-i18next';import{ethers}from'ethers';import styled from'styled-components';import escapeStringRegex from'escape-string-regexp';import{lighten,darken}from'polished';import Tooltip from'@reach/tooltip';import'@reach/tooltip/styles.css';import{BorderlessInput}from'../../theme';import{useTokenContract}from'../../hooks';import{isAddress,calculateGasMargin}from'../../utils';import{ReactComponent as DropDown}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/images/dropdown.svg\";import Modal from'../Modal';import TokenLogo from'../TokenLogo';import SearchIcon from\"../../assets/images/magnifying-glass.svg\";import{useTransactionAdder,usePendingApproval}from'../../contexts/Transactions';import{useTokenDetails,useAllTokenDetails}from'../../contexts/Tokens';var GAS_MARGIN=ethers.utils.bigNumberify(1000);var SubCurrencySelect=styled.button(_templateObject(),function(_ref){var theme=_ref.theme;return theme.flexRowNoWrap;},function(_ref2){var theme=_ref2.theme;return theme.zumthorBlue;},function(_ref3){var theme=_ref3.theme;return theme.royalBlue;},function(_ref4){var theme=_ref4.theme;return theme.royalBlue;});var InputRow=styled.div(_templateObject2(),function(_ref5){var theme=_ref5.theme;return theme.flexRowNoWrap;});var Input=styled(BorderlessInput)(_templateObject3(),function(_ref6){var error=_ref6.error,theme=_ref6.theme;return error&&theme.salmonRed;});var StyledBorderlessInput=styled(BorderlessInput)(_templateObject4());var CurrencySelect=styled.button(_templateObject5(),function(_ref7){var selected=_ref7.selected,theme=_ref7.theme;return selected?theme.black:theme.royalBlue;},function(_ref8){var selected=_ref8.selected,theme=_ref8.theme;return selected?theme.mercuryGray:theme.royalBlue;},function(_ref9){var selected=_ref9.selected,theme=_ref9.theme;return selected?theme.concreteGray:theme.zumthorBlue;},function(_ref10){var selected=_ref10.selected,theme=_ref10.theme;return selected?darken(0.1,theme.mercuryGray):darken(0.1,theme.royalBlue);},function(_ref11){var theme=_ref11.theme;return theme.malibuBlue;},function(_ref12){var theme=_ref12.theme;return theme.zumthorBlue;});var Aligner=styled.span(_templateObject6());var StyledDropDown=styled(DropDown)(_templateObject7(),function(_ref13){var selected=_ref13.selected,theme=_ref13.theme;return selected?theme.black:theme.royalBlue;});var InputPanel=styled.div(_templateObject8(),function(_ref14){var theme=_ref14.theme;return theme.flexColumnNoWrap;},function(_ref15){var theme=_ref15.theme;return lighten(0.9,theme.royalBlue);},function(_ref16){var theme=_ref16.theme;return theme.white;});var Container=styled.div(_templateObject9(),function(_ref17){var error=_ref17.error,theme=_ref17.theme;return error?theme.salmonRed:theme.mercuryGray;},function(_ref18){var theme=_ref18.theme;return theme.white;},function(_ref19){var theme=_ref19.theme;return theme.malibuBlue;});var LabelRow=styled.div(_templateObject10(),function(_ref20){var theme=_ref20.theme;return theme.flexRowNoWrap;},function(_ref21){var theme=_ref21.theme;return theme.doveGray;},function(_ref22){var theme=_ref22.theme;return darken(0.2,theme.doveGray);});var LabelContainer=styled.div(_templateObject11());var ErrorSpan=styled.span(_templateObject12(),function(_ref23){var error=_ref23.error,theme=_ref23.theme;return error&&theme.salmonRed;},function(_ref24){var error=_ref24.error,theme=_ref24.theme;return error&&darken(0.1,theme.salmonRed);});var TokenModal=styled.div(_templateObject13(),function(_ref25){var theme=_ref25.theme;return theme.flexColumnNoWrap;},function(_ref26){var theme=_ref26.theme;return theme.white;});var SearchContainer=styled.div(_templateObject14(),function(_ref27){var theme=_ref27.theme;return theme.flexRowNoWrap;},function(_ref28){var theme=_ref28.theme;return theme.mercuryGray;});var TokenModalInfo=styled.div(_templateObject15(),function(_ref29){var theme=_ref29.theme;return theme.flexRowNoWrap;});var TokenList=styled.div(_templateObject16());var TokenModalRow=styled.div(_templateObject17(),function(_ref30){var theme=_ref30.theme;return theme.flexRowNoWrap;},function(_ref31){var theme=_ref31.theme;return theme.doveGrey;},function(_ref32){var theme=_ref32.theme;return theme.concreteGray;});var StyledTokenName=styled.span(_templateObject18());export default function CurrencyInputPanel(_ref33){var _ref33$onValueChange=_ref33.onValueChange,onValueChange=_ref33$onValueChange===void 0?function(){}:_ref33$onValueChange,renderInput=_ref33.renderInput,_ref33$onCurrencySele=_ref33.onCurrencySelected,onCurrencySelected=_ref33$onCurrencySele===void 0?function(){}:_ref33$onCurrencySele,title=_ref33.title,description=_ref33.description,extraText=_ref33.extraText,_ref33$extraTextClick=_ref33.extraTextClickHander,extraTextClickHander=_ref33$extraTextClick===void 0?function(){}:_ref33$extraTextClick,errorMessage=_ref33.errorMessage,disableUnlock=_ref33.disableUnlock,disableTokenSelect=_ref33.disableTokenSelect,_ref33$selectedTokenA=_ref33.selectedTokenAddress,selectedTokenAddress=_ref33$selectedTokenA===void 0?'':_ref33$selectedTokenA,showUnlock=_ref33.showUnlock,value=_ref33.value;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalIsOpen=_useState2[0],setModalIsOpen=_useState2[1];var tokenContract=useTokenContract(selectedTokenAddress);var _useTokenDetails=useTokenDetails(selectedTokenAddress),selectedTokenExchangeAddress=_useTokenDetails.exchangeAddress;var pendingApproval=usePendingApproval(selectedTokenAddress);var addTransaction=useTransactionAdder();var allTokens=useAllTokenDetails();function renderUnlockButton(){if(disableUnlock||!showUnlock||selectedTokenAddress==='ETH'||!selectedTokenAddress){return null;}else{if(!pendingApproval){return React.createElement(SubCurrencySelect,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var estimatedGas;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return tokenContract.estimate.approve(selectedTokenExchangeAddress,ethers.constants.MaxUint256);case 2:estimatedGas=_context.sent;tokenContract.approve(selectedTokenExchangeAddress,ethers.constants.MaxUint256,{gasLimit:calculateGasMargin(estimatedGas,GAS_MARGIN)}).then(function(response){addTransaction(response,{approval:selectedTokenAddress});});case 4:case\"end\":return _context.stop();}}},_callee);}))},t('unlock'));}else{return React.createElement(SubCurrencySelect,null,t('pending'));}}}function _renderInput(){if(typeof renderInput==='function'){return renderInput();}return React.createElement(InputRow,null,React.createElement(Input,{type:\"number\",min:\"0\",error:!!errorMessage,placeholder:\"0.0\",onChange:function onChange(e){return onValueChange(e.target.value);},onKeyPress:function onKeyPress(e){var charCode=e.which?e.which:e.keyCode;// Prevent 'minus' character\nif(charCode===45){e.preventDefault();e.stopPropagation();}},value:value}),renderUnlockButton(),React.createElement(CurrencySelect,{selected:!!selectedTokenAddress,onClick:function onClick(){if(!disableTokenSelect){setModalIsOpen(true);}}},React.createElement(Aligner,null,selectedTokenAddress?React.createElement(TokenLogo,{address:selectedTokenAddress}):null,React.createElement(StyledTokenName,null,allTokens[selectedTokenAddress]&&allTokens[selectedTokenAddress].symbol||t('selectToken')),!disableTokenSelect&&React.createElement(StyledDropDown,{selected:!!selectedTokenAddress}))));}return React.createElement(InputPanel,null,React.createElement(Container,{error:!!errorMessage},React.createElement(LabelRow,null,React.createElement(LabelContainer,null,React.createElement(\"span\",null,title),\" \",React.createElement(\"span\",null,description)),React.createElement(ErrorSpan,{\"data-tip\":'Enter max',error:!!errorMessage,onClick:function onClick(){extraTextClickHander();}},React.createElement(Tooltip,{label:\"Enter Max\",style:{background:'hsla(0, 0%, 0%, 0.75)',color:'white',border:'none',borderRadius:'24px',padding:'0.5em 1em',marginTop:'-64px'}},React.createElement(\"span\",null,extraText)))),_renderInput()),!disableTokenSelect&&React.createElement(CurrencySelectModal,{isOpen:modalIsOpen,onDismiss:function onDismiss(){setModalIsOpen(false);},onTokenSelect:onCurrencySelected}));}function CurrencySelectModal(_ref35){var isOpen=_ref35.isOpen,onDismiss=_ref35.onDismiss,onTokenSelect=_ref35.onTokenSelect;var _useTranslation2=useTranslation(),t=_useTranslation2.t;var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),searchQuery=_useState4[0],setSearchQuery=_useState4[1];var _useTokenDetails2=useTokenDetails(searchQuery),exchangeAddress=_useTokenDetails2.exchangeAddress;var allTokens=useAllTokenDetails();var tokenList=useMemo(function(){return Object.keys(allTokens).sort(function(a,b){var aSymbol=allTokens[a].symbol.toLowerCase();var bSymbol=allTokens[b].symbol.toLowerCase();if(aSymbol==='ETH'.toLowerCase()||bSymbol==='ETH'.toLowerCase()){return aSymbol===bSymbol?0:aSymbol==='ETH'.toLowerCase()?-1:1;}else{return aSymbol<bSymbol?-1:aSymbol>bSymbol?1:0;}}).map(function(k){return{name:allTokens[k].name,symbol:allTokens[k].symbol,address:k};});},[allTokens]);var filteredTokenList=useMemo(function(){return tokenList.filter(function(tokenEntry){// check the regex for each field\nvar regexMatches=Object.keys(tokenEntry).map(function(tokenEntryKey){return tokenEntry[tokenEntryKey]&&!!tokenEntry[tokenEntryKey].match(new RegExp(escapeStringRegex(searchQuery),'i'));});return regexMatches.some(function(m){return m;});});},[tokenList,searchQuery]);function _onTokenSelect(address){setSearchQuery('');onTokenSelect(address);onDismiss();}function renderTokenList(){if(isAddress(searchQuery)&&exchangeAddress===undefined){return React.createElement(TokenModalInfo,null,\"Searching for Exchange...\");}if(isAddress(searchQuery)&&exchangeAddress===ethers.constants.AddressZero){return React.createElement(React.Fragment,null,React.createElement(TokenModalInfo,null,t('noExchange')),React.createElement(TokenModalInfo,null,React.createElement(Link,{to:\"/create-exchange/\".concat(searchQuery)},t('createExchange'))));}if(!filteredTokenList.length){return React.createElement(TokenModalInfo,null,t('noExchange'));}return filteredTokenList.map(function(_ref36){var address=_ref36.address,symbol=_ref36.symbol;return React.createElement(TokenModalRow,{key:address,onClick:function onClick(){return _onTokenSelect(address);}},React.createElement(TokenLogo,{address:address}),React.createElement(\"span\",{id:\"symbol\"},symbol));});}// manage focus on modal show\nvar inputRef=useRef();function onInput(event){var input=event.target.value;var checksummedInput=isAddress(input);setSearchQuery(checksummedInput||input);}return React.createElement(Modal,{isOpen:isOpen,onDismiss:onDismiss,initialFocusRef:inputRef},React.createElement(TokenModal,null,React.createElement(SearchContainer,null,React.createElement(StyledBorderlessInput,{ref:inputRef,type:\"text\",placeholder:t('searchOrPaste'),onChange:onInput}),React.createElement(\"img\",{src:SearchIcon,alt:\"search\"})),React.createElement(TokenList,null,renderTokenList())));}","map":{"version":3,"sources":["/workspace/uniswap-exchange/src/components/CurrencyInputPanel/index.js"],"names":["React","useState","useRef","useMemo","Link","useTranslation","ethers","styled","escapeStringRegex","lighten","darken","Tooltip","BorderlessInput","useTokenContract","isAddress","calculateGasMargin","Modal","TokenLogo","useTransactionAdder","usePendingApproval","useTokenDetails","useAllTokenDetails","GAS_MARGIN","utils","bigNumberify","SubCurrencySelect","button","theme","flexRowNoWrap","zumthorBlue","royalBlue","InputRow","div","Input","error","salmonRed","StyledBorderlessInput","CurrencySelect","selected","black","mercuryGray","concreteGray","malibuBlue","Aligner","span","StyledDropDown","DropDown","InputPanel","flexColumnNoWrap","white","Container","LabelRow","doveGray","LabelContainer","ErrorSpan","TokenModal","SearchContainer","TokenModalInfo","TokenList","TokenModalRow","doveGrey","StyledTokenName","CurrencyInputPanel","onValueChange","renderInput","onCurrencySelected","title","description","extraText","extraTextClickHander","errorMessage","disableUnlock","disableTokenSelect","selectedTokenAddress","showUnlock","value","t","modalIsOpen","setModalIsOpen","tokenContract","selectedTokenExchangeAddress","exchangeAddress","pendingApproval","addTransaction","allTokens","renderUnlockButton","estimate","approve","constants","MaxUint256","estimatedGas","gasLimit","then","response","approval","_renderInput","e","target","charCode","which","keyCode","preventDefault","stopPropagation","symbol","background","color","border","borderRadius","padding","marginTop","CurrencySelectModal","isOpen","onDismiss","onTokenSelect","searchQuery","setSearchQuery","tokenList","Object","keys","sort","a","b","aSymbol","toLowerCase","bSymbol","map","k","name","address","filteredTokenList","filter","tokenEntry","regexMatches","tokenEntryKey","match","RegExp","some","m","_onTokenSelect","renderTokenList","undefined","AddressZero","length","inputRef","onInput","event","input","checksummedInput","SearchIcon"],"mappings":"mjKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,MAA1B,CAAkCC,OAAlC,KAAiD,OAAjD,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,cAAT,KAA+B,eAA/B,CACA,OAASC,MAAT,KAAuB,QAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,sBAA9B,CACA,OAASC,OAAT,CAAkBC,MAAlB,KAAgC,UAAhC,CACA,MAAOC,CAAAA,OAAP,KAAoB,gBAApB,CACA,MAAO,2BAAP,CAEA,OAASC,eAAT,KAAgC,aAAhC,CACA,OAASC,gBAAT,KAAiC,aAAjC,CACA,OAASC,SAAT,CAAoBC,kBAApB,KAA8C,aAA9C,C,6GAEA,MAAOC,CAAAA,KAAP,KAAkB,UAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,cAAtB,C,iEAEA,OAASC,mBAAT,CAA8BC,kBAA9B,KAAwD,6BAAxD,CACA,OAASC,eAAT,CAA0BC,kBAA1B,KAAoD,uBAApD,CAEA,GAAMC,CAAAA,UAAU,CAAGhB,MAAM,CAACiB,KAAP,CAAaC,YAAb,CAA0B,IAA1B,CAAnB,CAEA,GAAMC,CAAAA,iBAAiB,CAAGlB,MAAM,CAACmB,MAAV,mBACnB,kBAAGC,CAAAA,KAAH,MAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACC,aAArB,EADmB,CAEP,mBAAGD,CAAAA,KAAH,OAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACE,WAArB,EAFO,CAGD,mBAAGF,CAAAA,KAAH,OAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACG,SAArB,EAHC,CAIZ,mBAAGH,CAAAA,KAAH,OAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACG,SAArB,EAJY,CAAvB,CAeA,GAAMC,CAAAA,QAAQ,CAAGxB,MAAM,CAACyB,GAAV,oBACV,mBAAGL,CAAAA,KAAH,OAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACC,aAArB,EADU,CAAd,CAMA,GAAMK,CAAAA,KAAK,CAAG1B,MAAM,CAACK,eAAD,CAAT,oBAEA,mBAAGsB,CAAAA,KAAH,OAAGA,KAAH,CAAUP,KAAV,OAAUA,KAAV,OAAsBO,CAAAA,KAAK,EAAIP,KAAK,CAACQ,SAArC,EAFA,CAAX,CAKA,GAAMC,CAAAA,qBAAqB,CAAG7B,MAAM,CAACK,eAAD,CAAT,oBAA3B,CAKA,GAAMyB,CAAAA,cAAc,CAAG9B,MAAM,CAACmB,MAAV,oBAGT,mBAAGY,CAAAA,QAAH,OAAGA,QAAH,CAAaX,KAAb,OAAaA,KAAb,OAA0BW,CAAAA,QAAQ,CAAGX,KAAK,CAACY,KAAT,CAAiBZ,KAAK,CAACG,SAAzD,EAHS,CAKE,mBAAGQ,CAAAA,QAAH,OAAGA,QAAH,CAAaX,KAAb,OAAaA,KAAb,OAA0BW,CAAAA,QAAQ,CAAGX,KAAK,CAACa,WAAT,CAAuBb,KAAK,CAACG,SAA/D,EALF,CAOE,mBAAGQ,CAAAA,QAAH,OAAGA,QAAH,CAAaX,KAAb,OAAaA,KAAb,OAA0BW,CAAAA,QAAQ,CAAGX,KAAK,CAACc,YAAT,CAAwBd,KAAK,CAACE,WAAhE,EAPF,CAcZ,oBAAGS,CAAAA,QAAH,QAAGA,QAAH,CAAaX,KAAb,QAAaA,KAAb,OAA0BW,CAAAA,QAAQ,CAAG5B,MAAM,CAAC,GAAD,CAAMiB,KAAK,CAACa,WAAZ,CAAT,CAAoC9B,MAAM,CAAC,GAAD,CAAMiB,KAAK,CAACG,SAAZ,CAA5E,EAdY,CAkBc,oBAAGH,CAAAA,KAAH,QAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACe,UAArB,EAlBd,CAsBI,oBAAGf,CAAAA,KAAH,QAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACE,WAArB,EAtBJ,CAApB,CA0BA,GAAMc,CAAAA,OAAO,CAAGpC,MAAM,CAACqC,IAAV,oBAAb,CAMA,GAAMC,CAAAA,cAAc,CAAGtC,MAAM,CAACuC,QAAD,CAAT,oBAKN,oBAAGR,CAAAA,QAAH,QAAGA,QAAH,CAAaX,KAAb,QAAaA,KAAb,OAA0BW,CAAAA,QAAQ,CAAGX,KAAK,CAACY,KAAT,CAAiBZ,KAAK,CAACG,SAAzD,EALM,CAApB,CASA,GAAMiB,CAAAA,UAAU,CAAGxC,MAAM,CAACyB,GAAV,oBACZ,oBAAGL,CAAAA,KAAH,QAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACqB,gBAArB,EADY,CAEY,oBAAGrB,CAAAA,KAAH,QAAGA,KAAH,OAAelB,CAAAA,OAAO,CAAC,GAAD,CAAMkB,KAAK,CAACG,SAAZ,CAAtB,EAFZ,CAKM,oBAAGH,CAAAA,KAAH,QAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACsB,KAArB,EALN,CAAhB,CASA,GAAMC,CAAAA,SAAS,CAAG3C,MAAM,CAACyB,GAAV,oBAEa,oBAAGE,CAAAA,KAAH,QAAGA,KAAH,CAAUP,KAAV,QAAUA,KAAV,OAAuBO,CAAAA,KAAK,CAAGP,KAAK,CAACQ,SAAT,CAAqBR,KAAK,CAACa,WAAvD,EAFb,CAGO,oBAAGb,CAAAA,KAAH,QAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACsB,KAArB,EAHP,CAOmB,oBAAGtB,CAAAA,KAAH,QAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACe,UAArB,EAPnB,CAAf,CAWA,GAAMS,CAAAA,QAAQ,CAAG5C,MAAM,CAACyB,GAAV,qBACV,oBAAGL,CAAAA,KAAH,QAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACC,aAArB,EADU,CAGH,oBAAGD,CAAAA,KAAH,QAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACyB,QAArB,EAHG,CASD,oBAAGzB,CAAAA,KAAH,QAAGA,KAAH,OAAejB,CAAAA,MAAM,CAAC,GAAD,CAAMiB,KAAK,CAACyB,QAAZ,CAArB,EATC,CAAd,CAaA,GAAMC,CAAAA,cAAc,CAAG9C,MAAM,CAACyB,GAAV,qBAApB,CAQA,GAAMsB,CAAAA,SAAS,CAAG/C,MAAM,CAACqC,IAAV,qBACJ,oBAAGV,CAAAA,KAAH,QAAGA,KAAH,CAAUP,KAAV,QAAUA,KAAV,OAAsBO,CAAAA,KAAK,EAAIP,KAAK,CAACQ,SAArC,EADI,CAIF,oBAAGD,CAAAA,KAAH,QAAGA,KAAH,CAAUP,KAAV,QAAUA,KAAV,OAAsBO,CAAAA,KAAK,EAAIxB,MAAM,CAAC,GAAD,CAAMiB,KAAK,CAACQ,SAAZ,CAArC,EAJE,CAAf,CAQA,GAAMoB,CAAAA,UAAU,CAAGhD,MAAM,CAACyB,GAAV,qBACZ,oBAAGL,CAAAA,KAAH,QAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACqB,gBAArB,EADY,CAEM,oBAAGrB,CAAAA,KAAH,QAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACsB,KAArB,EAFN,CAAhB,CAMA,GAAMO,CAAAA,eAAe,CAAGjD,MAAM,CAACyB,GAAV,qBACjB,oBAAGL,CAAAA,KAAH,QAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACC,aAArB,EADiB,CAGQ,oBAAGD,CAAAA,KAAH,QAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACa,WAArB,EAHR,CAArB,CAMA,GAAMiB,CAAAA,cAAc,CAAGlD,MAAM,CAACyB,GAAV,qBAChB,oBAAGL,CAAAA,KAAH,QAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACC,aAArB,EADgB,CAApB,CASA,GAAM8B,CAAAA,SAAS,CAAGnD,MAAM,CAACyB,GAAV,qBAAf,CAMA,GAAM2B,CAAAA,aAAa,CAAGpD,MAAM,CAACyB,GAAV,qBACf,oBAAGL,CAAAA,KAAH,QAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACC,aAArB,EADe,CAUN,oBAAGD,CAAAA,KAAH,QAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACiC,QAArB,EAVM,CAcK,oBAAGjC,CAAAA,KAAH,QAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACc,YAArB,EAdL,CAAnB,CAkBA,GAAMoB,CAAAA,eAAe,CAAGtD,MAAM,CAACqC,IAAV,qBAArB,CAIA,cAAe,SAASkB,CAAAA,kBAAT,QAcZ,iCAbDC,aAaC,CAbDA,aAaC,+BAbe,UAAM,CAAE,CAavB,sBAZDC,WAYC,QAZDA,WAYC,8BAXDC,kBAWC,CAXDA,kBAWC,gCAXoB,UAAM,CAAE,CAW5B,uBAVDC,KAUC,QAVDA,KAUC,CATDC,WASC,QATDA,WASC,CARDC,SAQC,QARDA,SAQC,8BAPDC,oBAOC,CAPDA,oBAOC,gCAPsB,UAAM,CAAE,CAO9B,uBANDC,YAMC,QANDA,YAMC,CALDC,aAKC,QALDA,aAKC,CAJDC,kBAIC,QAJDA,kBAIC,8BAHDC,oBAGC,CAHDA,oBAGC,gCAHsB,EAGtB,uBAFDC,UAEC,QAFDA,UAEC,CADDC,KACC,QADDA,KACC,qBACatE,cAAc,EAD3B,CACOuE,CADP,iBACOA,CADP,eAGqC3E,QAAQ,CAAC,KAAD,CAH7C,wCAGM4E,WAHN,eAGmBC,cAHnB,eAKD,GAAMC,CAAAA,aAAa,CAAGlE,gBAAgB,CAAC4D,oBAAD,CAAtC,CALC,qBAMyDrD,eAAe,CAACqD,oBAAD,CANxE,CAMwBO,4BANxB,kBAMOC,eANP,CAQD,GAAMC,CAAAA,eAAe,CAAG/D,kBAAkB,CAACsD,oBAAD,CAA1C,CAEA,GAAMU,CAAAA,cAAc,CAAGjE,mBAAmB,EAA1C,CAEA,GAAMkE,CAAAA,SAAS,CAAG/D,kBAAkB,EAApC,CAEA,QAASgE,CAAAA,kBAAT,EAA8B,CAC5B,GAAId,aAAa,EAAI,CAACG,UAAlB,EAAgCD,oBAAoB,GAAK,KAAzD,EAAkE,CAACA,oBAAvE,CAA6F,CAC3F,MAAO,KAAP,CACD,CAFD,IAEO,CACL,GAAI,CAACS,eAAL,CAAsB,CACpB,MACE,qBAAC,iBAAD,EACE,OAAO,sEAAE,0KACoBH,CAAAA,aAAa,CAACO,QAAd,CAAuBC,OAAvB,CACzBP,4BADyB,CAEzB1E,MAAM,CAACkF,SAAP,CAAiBC,UAFQ,CADpB,QACDC,YADC,eAMPX,aAAa,CACVQ,OADH,CACWP,4BADX,CACyC1E,MAAM,CAACkF,SAAP,CAAiBC,UAD1D,CACsE,CAClEE,QAAQ,CAAE5E,kBAAkB,CAAC2E,YAAD,CAAepE,UAAf,CADsC,CADtE,EAIGsE,IAJH,CAIQ,SAAAC,QAAQ,CAAI,CAChBV,cAAc,CAACU,QAAD,CAAW,CAAEC,QAAQ,CAAErB,oBAAZ,CAAX,CAAd,CACD,CANH,EANO,sDAAF,EADT,EAgBGG,CAAC,CAAC,QAAD,CAhBJ,CADF,CAoBD,CArBD,IAqBO,CACL,MAAO,qBAAC,iBAAD,MAAoBA,CAAC,CAAC,SAAD,CAArB,CAAP,CACD,CACF,CACF,CAED,QAASmB,CAAAA,YAAT,EAAwB,CACtB,GAAI,MAAO/B,CAAAA,WAAP,GAAuB,UAA3B,CAAuC,CACrC,MAAOA,CAAAA,WAAW,EAAlB,CACD,CAED,MACE,qBAAC,QAAD,MACE,oBAAC,KAAD,EACE,IAAI,CAAC,QADP,CAEE,GAAG,CAAC,GAFN,CAGE,KAAK,CAAE,CAAC,CAACM,YAHX,CAIE,WAAW,CAAC,KAJd,CAKE,QAAQ,CAAE,kBAAA0B,CAAC,QAAIjC,CAAAA,aAAa,CAACiC,CAAC,CAACC,MAAF,CAAStB,KAAV,CAAjB,EALb,CAME,UAAU,CAAE,oBAAAqB,CAAC,CAAI,CACf,GAAME,CAAAA,QAAQ,CAAGF,CAAC,CAACG,KAAF,CAAUH,CAAC,CAACG,KAAZ,CAAoBH,CAAC,CAACI,OAAvC,CAEA;AACA,GAAIF,QAAQ,GAAK,EAAjB,CAAqB,CACnBF,CAAC,CAACK,cAAF,GACAL,CAAC,CAACM,eAAF,GACD,CACF,CAdH,CAeE,KAAK,CAAE3B,KAfT,EADF,CAkBGU,kBAAkB,EAlBrB,CAmBE,oBAAC,cAAD,EACE,QAAQ,CAAE,CAAC,CAACZ,oBADd,CAEE,OAAO,CAAE,kBAAM,CACb,GAAI,CAACD,kBAAL,CAAyB,CACvBM,cAAc,CAAC,IAAD,CAAd,CACD,CACF,CANH,EAQE,oBAAC,OAAD,MACGL,oBAAoB,CAAG,oBAAC,SAAD,EAAW,OAAO,CAAEA,oBAApB,EAAH,CAAkD,IADzE,CAGI,oBAAC,eAAD,MACIW,SAAS,CAACX,oBAAD,CAAT,EAAmCW,SAAS,CAACX,oBAAD,CAAT,CAAgC8B,MAApE,EAA+E3B,CAAC,CAAC,aAAD,CADnF,CAHJ,CAOG,CAACJ,kBAAD,EAAuB,oBAAC,cAAD,EAAgB,QAAQ,CAAE,CAAC,CAACC,oBAA5B,EAP1B,CARF,CAnBF,CADF,CAwCD,CAED,MACE,qBAAC,UAAD,MACE,oBAAC,SAAD,EAAW,KAAK,CAAE,CAAC,CAACH,YAApB,EACE,oBAAC,QAAD,MACE,oBAAC,cAAD,MACE,gCAAOJ,KAAP,CADF,KACuB,gCAAOC,WAAP,CADvB,CADF,CAKE,oBAAC,SAAD,EACE,WAAU,WADZ,CAEE,KAAK,CAAE,CAAC,CAACG,YAFX,CAGE,OAAO,CAAE,kBAAM,CACbD,oBAAoB,GACrB,CALH,EAOE,oBAAC,OAAD,EACE,KAAK,CAAC,WADR,CAEE,KAAK,CAAE,CACLmC,UAAU,CAAE,uBADP,CAELC,KAAK,CAAE,OAFF,CAGLC,MAAM,CAAE,MAHH,CAILC,YAAY,CAAE,MAJT,CAKLC,OAAO,CAAE,WALJ,CAMLC,SAAS,CAAE,OANN,CAFT,EAWE,gCAAOzC,SAAP,CAXF,CAPF,CALF,CADF,CA4BG2B,YAAY,EA5Bf,CADF,CA+BG,CAACvB,kBAAD,EACC,oBAAC,mBAAD,EACE,MAAM,CAAEK,WADV,CAEE,SAAS,CAAE,oBAAM,CACfC,cAAc,CAAC,KAAD,CAAd,CACD,CAJH,CAKE,aAAa,CAAEb,kBALjB,EAhCJ,CADF,CA2CD,CAED,QAAS6C,CAAAA,mBAAT,QAAmE,IAApCC,CAAAA,MAAoC,QAApCA,MAAoC,CAA5BC,SAA4B,QAA5BA,SAA4B,CAAjBC,aAAiB,QAAjBA,aAAiB,sBACnD5G,cAAc,EADqC,CACzDuE,CADyD,kBACzDA,CADyD,gBAG3B3E,QAAQ,CAAC,EAAD,CAHmB,yCAG1DiH,WAH0D,eAG7CC,cAH6C,qCAIrC/F,eAAe,CAAC8F,WAAD,CAJsB,CAIzDjC,eAJyD,mBAIzDA,eAJyD,CAMjE,GAAMG,CAAAA,SAAS,CAAG/D,kBAAkB,EAApC,CACA,GAAM+F,CAAAA,SAAS,CAAGjH,OAAO,CAAC,UAAM,CAC9B,MAAOkH,CAAAA,MAAM,CAACC,IAAP,CAAYlC,SAAZ,EACJmC,IADI,CACC,SAACC,CAAD,CAAIC,CAAJ,CAAU,CACd,GAAMC,CAAAA,OAAO,CAAGtC,SAAS,CAACoC,CAAD,CAAT,CAAajB,MAAb,CAAoBoB,WAApB,EAAhB,CACA,GAAMC,CAAAA,OAAO,CAAGxC,SAAS,CAACqC,CAAD,CAAT,CAAalB,MAAb,CAAoBoB,WAApB,EAAhB,CACA,GAAID,OAAO,GAAK,MAAMC,WAAN,EAAZ,EAAmCC,OAAO,GAAK,MAAMD,WAAN,EAAnD,CAAwE,CACtE,MAAOD,CAAAA,OAAO,GAAKE,OAAZ,CAAsB,CAAtB,CAA0BF,OAAO,GAAK,MAAMC,WAAN,EAAZ,CAAkC,CAAC,CAAnC,CAAuC,CAAxE,CACD,CAFD,IAEO,CACL,MAAOD,CAAAA,OAAO,CAAGE,OAAV,CAAoB,CAAC,CAArB,CAAyBF,OAAO,CAAGE,OAAV,CAAoB,CAApB,CAAwB,CAAxD,CACD,CACF,CATI,EAUJC,GAVI,CAUA,SAAAC,CAAC,CAAI,CACR,MAAO,CACLC,IAAI,CAAE3C,SAAS,CAAC0C,CAAD,CAAT,CAAaC,IADd,CAELxB,MAAM,CAAEnB,SAAS,CAAC0C,CAAD,CAAT,CAAavB,MAFhB,CAGLyB,OAAO,CAAEF,CAHJ,CAAP,CAKD,CAhBI,CAAP,CAiBD,CAlBwB,CAkBtB,CAAC1C,SAAD,CAlBsB,CAAzB,CAmBA,GAAM6C,CAAAA,iBAAiB,CAAG9H,OAAO,CAAC,UAAM,CACtC,MAAOiH,CAAAA,SAAS,CAACc,MAAV,CAAiB,SAAAC,UAAU,CAAI,CACpC;AACA,GAAMC,CAAAA,YAAY,CAAGf,MAAM,CAACC,IAAP,CAAYa,UAAZ,EAAwBN,GAAxB,CAA4B,SAAAQ,aAAa,CAAI,CAChE,MACEF,CAAAA,UAAU,CAACE,aAAD,CAAV,EACA,CAAC,CAACF,UAAU,CAACE,aAAD,CAAV,CAA0BC,KAA1B,CAAgC,GAAIC,CAAAA,MAAJ,CAAW/H,iBAAiB,CAAC0G,WAAD,CAA5B,CAA2C,GAA3C,CAAhC,CAFJ,CAID,CALoB,CAArB,CAOA,MAAOkB,CAAAA,YAAY,CAACI,IAAb,CAAkB,SAAAC,CAAC,QAAIA,CAAAA,CAAJ,EAAnB,CAAP,CACD,CAVM,CAAP,CAWD,CAZgC,CAY9B,CAACrB,SAAD,CAAYF,WAAZ,CAZ8B,CAAjC,CAcA,QAASwB,CAAAA,cAAT,CAAwBV,OAAxB,CAAiC,CAC/Bb,cAAc,CAAC,EAAD,CAAd,CACAF,aAAa,CAACe,OAAD,CAAb,CACAhB,SAAS,GACV,CAED,QAAS2B,CAAAA,eAAT,EAA2B,CACzB,GAAI7H,SAAS,CAACoG,WAAD,CAAT,EAA0BjC,eAAe,GAAK2D,SAAlD,CAA6D,CAC3D,MAAO,qBAAC,cAAD,kCAAP,CACD,CAED,GAAI9H,SAAS,CAACoG,WAAD,CAAT,EAA0BjC,eAAe,GAAK3E,MAAM,CAACkF,SAAP,CAAiBqD,WAAnE,CAAgF,CAC9E,MACE,yCACE,oBAAC,cAAD,MAAiBjE,CAAC,CAAC,YAAD,CAAlB,CADF,CAEE,oBAAC,cAAD,MACE,oBAAC,IAAD,EAAM,EAAE,4BAAsBsC,WAAtB,CAAR,EAA8CtC,CAAC,CAAC,gBAAD,CAA/C,CADF,CAFF,CADF,CAQD,CAED,GAAI,CAACqD,iBAAiB,CAACa,MAAvB,CAA+B,CAC7B,MAAO,qBAAC,cAAD,MAAiBlE,CAAC,CAAC,YAAD,CAAlB,CAAP,CACD,CAED,MAAOqD,CAAAA,iBAAiB,CAACJ,GAAlB,CAAsB,gBAAyB,IAAtBG,CAAAA,OAAsB,QAAtBA,OAAsB,CAAbzB,MAAa,QAAbA,MAAa,CACpD,MACE,qBAAC,aAAD,EAAe,GAAG,CAAEyB,OAApB,CAA6B,OAAO,CAAE,yBAAMU,CAAAA,cAAc,CAACV,OAAD,CAApB,EAAtC,EACE,oBAAC,SAAD,EAAW,OAAO,CAAEA,OAApB,EADF,CAEE,4BAAM,EAAE,CAAC,QAAT,EAAmBzB,MAAnB,CAFF,CADF,CAMD,CAPM,CAAP,CAQD,CAED;AACA,GAAMwC,CAAAA,QAAQ,CAAG7I,MAAM,EAAvB,CAEA,QAAS8I,CAAAA,OAAT,CAAiBC,KAAjB,CAAwB,CACtB,GAAMC,CAAAA,KAAK,CAAGD,KAAK,CAAChD,MAAN,CAAatB,KAA3B,CACA,GAAMwE,CAAAA,gBAAgB,CAAGrI,SAAS,CAACoI,KAAD,CAAlC,CACA/B,cAAc,CAACgC,gBAAgB,EAAID,KAArB,CAAd,CACD,CAED,MACE,qBAAC,KAAD,EAAO,MAAM,CAAEnC,MAAf,CAAuB,SAAS,CAAEC,SAAlC,CAA6C,eAAe,CAAE+B,QAA9D,EACE,oBAAC,UAAD,MACE,oBAAC,eAAD,MACE,oBAAC,qBAAD,EAAuB,GAAG,CAAEA,QAA5B,CAAsC,IAAI,CAAC,MAA3C,CAAkD,WAAW,CAAEnE,CAAC,CAAC,eAAD,CAAhE,CAAmF,QAAQ,CAAEoE,OAA7F,EADF,CAEE,2BAAK,GAAG,CAAEI,UAAV,CAAsB,GAAG,CAAC,QAA1B,EAFF,CADF,CAKE,oBAAC,SAAD,MAAYT,eAAe,EAA3B,CALF,CADF,CADF,CAWD","sourcesContent":["import React, { useState, useRef, useMemo } from 'react'\nimport { Link } from 'react-router-dom'\nimport { useTranslation } from 'react-i18next'\nimport { ethers } from 'ethers'\nimport styled from 'styled-components'\nimport escapeStringRegex from 'escape-string-regexp'\nimport { lighten, darken } from 'polished'\nimport Tooltip from '@reach/tooltip'\nimport '@reach/tooltip/styles.css'\n\nimport { BorderlessInput } from '../../theme'\nimport { useTokenContract } from '../../hooks'\nimport { isAddress, calculateGasMargin } from '../../utils'\nimport { ReactComponent as DropDown } from '../../assets/images/dropdown.svg'\nimport Modal from '../Modal'\nimport TokenLogo from '../TokenLogo'\nimport SearchIcon from '../../assets/images/magnifying-glass.svg'\nimport { useTransactionAdder, usePendingApproval } from '../../contexts/Transactions'\nimport { useTokenDetails, useAllTokenDetails } from '../../contexts/Tokens'\n\nconst GAS_MARGIN = ethers.utils.bigNumberify(1000)\n\nconst SubCurrencySelect = styled.button`\n  ${({ theme }) => theme.flexRowNoWrap}\n  background: ${({ theme }) => theme.zumthorBlue};\n  border: 1px solid ${({ theme }) => theme.royalBlue};\n  color: ${({ theme }) => theme.royalBlue};\n  line-height: 0;\n  height: 2rem;\n  padding: 10px 50px 10px 15px;\n  margin-right: -40px;\n  border-radius: 2.5rem;\n  outline: none;\n  cursor: pointer;\n  user-select: none;\n`\n\nconst InputRow = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap}\n  align-items: center;\n  padding: 0.25rem 0.85rem 0.75rem;\n`\n\nconst Input = styled(BorderlessInput)`\n  font-size: 1.5rem;\n  color: ${({ error, theme }) => error && theme.salmonRed};\n`\n\nconst StyledBorderlessInput = styled(BorderlessInput)`\n  min-height: 1.75rem;\n  flex-shrink: 0;\n`\n\nconst CurrencySelect = styled.button`\n  align-items: center;\n  font-size: 1rem;\n  color: ${({ selected, theme }) => (selected ? theme.black : theme.royalBlue)};\n  height: 2rem;\n  border: 1px solid ${({ selected, theme }) => (selected ? theme.mercuryGray : theme.royalBlue)};\n  border-radius: 2.5rem;\n  background-color: ${({ selected, theme }) => (selected ? theme.concreteGray : theme.zumthorBlue)};\n  outline: none;\n  cursor: pointer;\n  user-select: none;\n\n  :hover {\n    border: 1px solid\n      ${({ selected, theme }) => (selected ? darken(0.1, theme.mercuryGray) : darken(0.1, theme.royalBlue))};\n  }\n\n  :focus {\n    box-shadow: 0 0 0.5px 0.5px ${({ theme }) => theme.malibuBlue};\n  }\n\n  :active {\n    background-color: ${({ theme }) => theme.zumthorBlue};\n  }\n`\n\nconst Aligner = styled.span`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`\n\nconst StyledDropDown = styled(DropDown)`\n  margin: 0 0.5rem 0 0.5rem;\n  height: 35%;\n\n  path {\n    stroke: ${({ selected, theme }) => (selected ? theme.black : theme.royalBlue)};\n  }\n`\n\nconst InputPanel = styled.div`\n  ${({ theme }) => theme.flexColumnNoWrap}\n  box-shadow: 0 4px 8px 0 ${({ theme }) => lighten(0.9, theme.royalBlue)};\n  position: relative;\n  border-radius: 1.25rem;\n  background-color: ${({ theme }) => theme.white};\n  z-index: 1;\n`\n\nconst Container = styled.div`\n  border-radius: 1.25rem;\n  box-shadow: 0 0 0 0.5px ${({ error, theme }) => (error ? theme.salmonRed : theme.mercuryGray)};\n  background-color: ${({ theme }) => theme.white};\n  transition: box-shadow 200ms ease-in-out;\n\n  :focus-within {\n    box-shadow: 0 0 0.5px 0.5px ${({ theme }) => theme.malibuBlue};\n  }\n`\n\nconst LabelRow = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap}\n  align-items: center;\n  color: ${({ theme }) => theme.doveGray};\n  font-size: 0.75rem;\n  line-height: 1rem;\n  padding: 0.75rem 1rem;\n  span:hover {\n    cursor: pointer;\n    color: ${({ theme }) => darken(0.2, theme.doveGray)};\n  }\n`\n\nconst LabelContainer = styled.div`\n  flex: 1 1 auto;\n  width: 0;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n`\n\nconst ErrorSpan = styled.span`\n  color: ${({ error, theme }) => error && theme.salmonRed};\n  :hover {\n    cursor: pointer;\n    color: ${({ error, theme }) => error && darken(0.1, theme.salmonRed)};\n  }\n`\n\nconst TokenModal = styled.div`\n  ${({ theme }) => theme.flexColumnNoWrap}\n  background-color: ${({ theme }) => theme.white};\n  width: 100%;\n`\n\nconst SearchContainer = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap}\n  padding: 1rem;\n  border-bottom: 1px solid ${({ theme }) => theme.mercuryGray};\n`\n\nconst TokenModalInfo = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap}\n  align-items: center;\n  padding: 1rem 1.5rem;\n  margin: 0.25rem 0.5rem;\n  justify-content: center;\n  user-select: none;\n`\n\nconst TokenList = styled.div`\n  flex-grow: 1;\n  height: 100%;\n  overflow-y: auto;\n`\n\nconst TokenModalRow = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap}\n  align-items: center;\n  padding: 1rem 1.5rem;\n  margin: 0.25rem 0.5rem;\n  justify-content: space-between;\n  cursor: pointer;\n  user-select: none;\n\n  #symbol {\n    color: ${({ theme }) => theme.doveGrey};\n  }\n\n  :hover {\n    background-color: ${({ theme }) => theme.concreteGray};\n  }\n`\n\nconst StyledTokenName = styled.span`\n  margin: 0 0.25rem 0 0.25rem;\n`\n\nexport default function CurrencyInputPanel({\n  onValueChange = () => {},\n  renderInput,\n  onCurrencySelected = () => {},\n  title,\n  description,\n  extraText,\n  extraTextClickHander = () => {},\n  errorMessage,\n  disableUnlock,\n  disableTokenSelect,\n  selectedTokenAddress = '',\n  showUnlock,\n  value\n}) {\n  const { t } = useTranslation()\n\n  const [modalIsOpen, setModalIsOpen] = useState(false)\n\n  const tokenContract = useTokenContract(selectedTokenAddress)\n  const { exchangeAddress: selectedTokenExchangeAddress } = useTokenDetails(selectedTokenAddress)\n\n  const pendingApproval = usePendingApproval(selectedTokenAddress)\n\n  const addTransaction = useTransactionAdder()\n\n  const allTokens = useAllTokenDetails()\n\n  function renderUnlockButton() {\n    if (disableUnlock || !showUnlock || selectedTokenAddress === 'ETH' || !selectedTokenAddress) {\n      return null\n    } else {\n      if (!pendingApproval) {\n        return (\n          <SubCurrencySelect\n            onClick={async () => {\n              const estimatedGas = await tokenContract.estimate.approve(\n                selectedTokenExchangeAddress,\n                ethers.constants.MaxUint256\n              )\n\n              tokenContract\n                .approve(selectedTokenExchangeAddress, ethers.constants.MaxUint256, {\n                  gasLimit: calculateGasMargin(estimatedGas, GAS_MARGIN)\n                })\n                .then(response => {\n                  addTransaction(response, { approval: selectedTokenAddress })\n                })\n            }}\n          >\n            {t('unlock')}\n          </SubCurrencySelect>\n        )\n      } else {\n        return <SubCurrencySelect>{t('pending')}</SubCurrencySelect>\n      }\n    }\n  }\n\n  function _renderInput() {\n    if (typeof renderInput === 'function') {\n      return renderInput()\n    }\n\n    return (\n      <InputRow>\n        <Input\n          type=\"number\"\n          min=\"0\"\n          error={!!errorMessage}\n          placeholder=\"0.0\"\n          onChange={e => onValueChange(e.target.value)}\n          onKeyPress={e => {\n            const charCode = e.which ? e.which : e.keyCode\n\n            // Prevent 'minus' character\n            if (charCode === 45) {\n              e.preventDefault()\n              e.stopPropagation()\n            }\n          }}\n          value={value}\n        />\n        {renderUnlockButton()}\n        <CurrencySelect\n          selected={!!selectedTokenAddress}\n          onClick={() => {\n            if (!disableTokenSelect) {\n              setModalIsOpen(true)\n            }\n          }}\n        >\n          <Aligner>\n            {selectedTokenAddress ? <TokenLogo address={selectedTokenAddress} /> : null}\n            {\n              <StyledTokenName>\n                {(allTokens[selectedTokenAddress] && allTokens[selectedTokenAddress].symbol) || t('selectToken')}\n              </StyledTokenName>\n            }\n            {!disableTokenSelect && <StyledDropDown selected={!!selectedTokenAddress} />}\n          </Aligner>\n        </CurrencySelect>\n      </InputRow>\n    )\n  }\n\n  return (\n    <InputPanel>\n      <Container error={!!errorMessage}>\n        <LabelRow>\n          <LabelContainer>\n            <span>{title}</span> <span>{description}</span>\n          </LabelContainer>\n\n          <ErrorSpan\n            data-tip={'Enter max'}\n            error={!!errorMessage}\n            onClick={() => {\n              extraTextClickHander()\n            }}\n          >\n            <Tooltip\n              label=\"Enter Max\"\n              style={{\n                background: 'hsla(0, 0%, 0%, 0.75)',\n                color: 'white',\n                border: 'none',\n                borderRadius: '24px',\n                padding: '0.5em 1em',\n                marginTop: '-64px'\n              }}\n            >\n              <span>{extraText}</span>\n            </Tooltip>\n          </ErrorSpan>\n        </LabelRow>\n        {_renderInput()}\n      </Container>\n      {!disableTokenSelect && (\n        <CurrencySelectModal\n          isOpen={modalIsOpen}\n          onDismiss={() => {\n            setModalIsOpen(false)\n          }}\n          onTokenSelect={onCurrencySelected}\n        />\n      )}\n    </InputPanel>\n  )\n}\n\nfunction CurrencySelectModal({ isOpen, onDismiss, onTokenSelect }) {\n  const { t } = useTranslation()\n\n  const [searchQuery, setSearchQuery] = useState('')\n  const { exchangeAddress } = useTokenDetails(searchQuery)\n\n  const allTokens = useAllTokenDetails()\n  const tokenList = useMemo(() => {\n    return Object.keys(allTokens)\n      .sort((a, b) => {\n        const aSymbol = allTokens[a].symbol.toLowerCase()\n        const bSymbol = allTokens[b].symbol.toLowerCase()\n        if (aSymbol === 'ETH'.toLowerCase() || bSymbol === 'ETH'.toLowerCase()) {\n          return aSymbol === bSymbol ? 0 : aSymbol === 'ETH'.toLowerCase() ? -1 : 1\n        } else {\n          return aSymbol < bSymbol ? -1 : aSymbol > bSymbol ? 1 : 0\n        }\n      })\n      .map(k => {\n        return {\n          name: allTokens[k].name,\n          symbol: allTokens[k].symbol,\n          address: k\n        }\n      })\n  }, [allTokens])\n  const filteredTokenList = useMemo(() => {\n    return tokenList.filter(tokenEntry => {\n      // check the regex for each field\n      const regexMatches = Object.keys(tokenEntry).map(tokenEntryKey => {\n        return (\n          tokenEntry[tokenEntryKey] &&\n          !!tokenEntry[tokenEntryKey].match(new RegExp(escapeStringRegex(searchQuery), 'i'))\n        )\n      })\n\n      return regexMatches.some(m => m)\n    })\n  }, [tokenList, searchQuery])\n\n  function _onTokenSelect(address) {\n    setSearchQuery('')\n    onTokenSelect(address)\n    onDismiss()\n  }\n\n  function renderTokenList() {\n    if (isAddress(searchQuery) && exchangeAddress === undefined) {\n      return <TokenModalInfo>Searching for Exchange...</TokenModalInfo>\n    }\n\n    if (isAddress(searchQuery) && exchangeAddress === ethers.constants.AddressZero) {\n      return (\n        <>\n          <TokenModalInfo>{t('noExchange')}</TokenModalInfo>\n          <TokenModalInfo>\n            <Link to={`/create-exchange/${searchQuery}`}>{t('createExchange')}</Link>\n          </TokenModalInfo>\n        </>\n      )\n    }\n\n    if (!filteredTokenList.length) {\n      return <TokenModalInfo>{t('noExchange')}</TokenModalInfo>\n    }\n\n    return filteredTokenList.map(({ address, symbol }) => {\n      return (\n        <TokenModalRow key={address} onClick={() => _onTokenSelect(address)}>\n          <TokenLogo address={address} />\n          <span id=\"symbol\">{symbol}</span>\n        </TokenModalRow>\n      )\n    })\n  }\n\n  // manage focus on modal show\n  const inputRef = useRef()\n\n  function onInput(event) {\n    const input = event.target.value\n    const checksummedInput = isAddress(input)\n    setSearchQuery(checksummedInput || input)\n  }\n\n  return (\n    <Modal isOpen={isOpen} onDismiss={onDismiss} initialFocusRef={inputRef}>\n      <TokenModal>\n        <SearchContainer>\n          <StyledBorderlessInput ref={inputRef} type=\"text\" placeholder={t('searchOrPaste')} onChange={onInput} />\n          <img src={SearchIcon} alt=\"search\" />\n        </SearchContainer>\n        <TokenList>{renderTokenList()}</TokenList>\n      </TokenModal>\n    </Modal>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}