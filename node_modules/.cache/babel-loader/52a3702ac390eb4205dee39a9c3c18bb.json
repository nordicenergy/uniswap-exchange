{"ast":null,"code":"import _slicedToArray from\"/workspace/uniswap-exchange/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useMemo,useCallback,useEffect}from'react';import{useWeb3Context}from'web3-react';import ERC20_ABI from'../constants/abis/erc20';import{getContract,getFactoryContract,getExchangeContract,isAddress}from'../utils';import copy from'copy-to-clipboard';// modified from https://usehooks.com/useDebounce/\nexport function useDebounce(value,delay){var _useState=useState(value),_useState2=_slicedToArray(_useState,2),debouncedValue=_useState2[0],setDebouncedValue=_useState2[1];useEffect(function(){// Update debounced value after delay\nvar handler=setTimeout(function(){setDebouncedValue(value);},delay);// Cancel the timeout if value changes (also on delay change or unmount)\n// This is how we prevent debounced value from updating if value is changed ...\n// .. within the delay period. Timeout gets cleared and restarted.\nreturn function(){clearTimeout(handler);};},[value,delay]);return debouncedValue;}// modified from https://usehooks.com/useKeyPress/\nexport function useBodyKeyDown(targetKey,onKeyDown){var suppressOnKeyDown=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var downHandler=useCallback(function(event){var tagName=event.target.tagName,key=event.key;if(key===targetKey&&tagName==='BODY'&&!suppressOnKeyDown){event.preventDefault();onKeyDown();}},[targetKey,onKeyDown,suppressOnKeyDown]);useEffect(function(){window.addEventListener('keydown',downHandler);return function(){window.removeEventListener('keydown',downHandler);};},[downHandler]);}export function useENSName(address){var _useWeb3Context=useWeb3Context(),library=_useWeb3Context.library;var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),ENSName=_useState4[0],setENSNname=_useState4[1];useEffect(function(){if(isAddress(address)){var stale=false;library.lookupAddress(address).then(function(name){if(!stale){if(name){setENSNname(name);}else{setENSNname(null);}}}).catch(function(){if(!stale){setENSNname(null);}});return function(){stale=true;setENSNname();};}},[library,address]);return ENSName;}// returns null on errors\nexport function useContract(address,ABI){var withSignerIfPossible=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var _useWeb3Context2=useWeb3Context(),library=_useWeb3Context2.library,account=_useWeb3Context2.account;return useMemo(function(){try{return getContract(address,ABI,library,withSignerIfPossible?account:undefined);}catch(_unused){return null;}},[address,ABI,library,withSignerIfPossible,account]);}// returns null on errors\nexport function useTokenContract(tokenAddress){var withSignerIfPossible=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var _useWeb3Context3=useWeb3Context(),library=_useWeb3Context3.library,account=_useWeb3Context3.account;return useMemo(function(){try{return getContract(tokenAddress,ERC20_ABI,library,withSignerIfPossible?account:undefined);}catch(_unused2){return null;}},[tokenAddress,library,withSignerIfPossible,account]);}// returns null on errors\nexport function useFactoryContract(){var withSignerIfPossible=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var _useWeb3Context4=useWeb3Context(),networkId=_useWeb3Context4.networkId,library=_useWeb3Context4.library,account=_useWeb3Context4.account;return useMemo(function(){try{return getFactoryContract(networkId,library,withSignerIfPossible?account:undefined);}catch(_unused3){return null;}},[networkId,library,withSignerIfPossible,account]);}export function useExchangeContract(exchangeAddress){var withSignerIfPossible=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var _useWeb3Context5=useWeb3Context(),library=_useWeb3Context5.library,account=_useWeb3Context5.account;return useMemo(function(){try{return getExchangeContract(exchangeAddress,library,withSignerIfPossible?account:undefined);}catch(_unused4){return null;}},[exchangeAddress,library,withSignerIfPossible,account]);}export function useCopyClipboard(){var timeout=arguments.length>0&&arguments[0]!==undefined?arguments[0]:500;var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isCopied=_useState6[0],setIsCopied=_useState6[1];var staticCopy=useCallback(function(text){var didCopy=copy(text);setIsCopied(didCopy);},[]);useEffect(function(){if(isCopied){var hide=setTimeout(function(){setIsCopied(false);},timeout);return function(){clearTimeout(hide);};}},[isCopied,setIsCopied,timeout]);return[isCopied,staticCopy];}","map":{"version":3,"sources":["/workspace/uniswap-exchange/src/hooks/index.js"],"names":["useState","useMemo","useCallback","useEffect","useWeb3Context","ERC20_ABI","getContract","getFactoryContract","getExchangeContract","isAddress","copy","useDebounce","value","delay","debouncedValue","setDebouncedValue","handler","setTimeout","clearTimeout","useBodyKeyDown","targetKey","onKeyDown","suppressOnKeyDown","downHandler","event","tagName","target","key","preventDefault","window","addEventListener","removeEventListener","useENSName","address","library","ENSName","setENSNname","stale","lookupAddress","then","name","catch","useContract","ABI","withSignerIfPossible","account","undefined","useTokenContract","tokenAddress","useFactoryContract","networkId","useExchangeContract","exchangeAddress","useCopyClipboard","timeout","isCopied","setIsCopied","staticCopy","text","didCopy","hide"],"mappings":"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","sourcesContent":["import { useState, useMemo, useCallback, useEffect } from 'react'\nimport { useWeb3Context } from 'web3-react'\n\nimport ERC20_ABI from '../constants/abis/erc20'\nimport { getContract, getFactoryContract, getExchangeContract, isAddress } from '../utils'\nimport copy from 'copy-to-clipboard'\n\n// modified from https://usehooks.com/useDebounce/\nexport function useDebounce(value, delay) {\n  const [debouncedValue, setDebouncedValue] = useState(value)\n\n  useEffect(() => {\n    // Update debounced value after delay\n    const handler = setTimeout(() => {\n      setDebouncedValue(value)\n    }, delay)\n\n    // Cancel the timeout if value changes (also on delay change or unmount)\n    // This is how we prevent debounced value from updating if value is changed ...\n    // .. within the delay period. Timeout gets cleared and restarted.\n    return () => {\n      clearTimeout(handler)\n    }\n  }, [value, delay])\n\n  return debouncedValue\n}\n\n// modified from https://usehooks.com/useKeyPress/\nexport function useBodyKeyDown(targetKey, onKeyDown, suppressOnKeyDown = false) {\n  const downHandler = useCallback(\n    event => {\n      const {\n        target: { tagName },\n        key\n      } = event\n      if (key === targetKey && tagName === 'BODY' && !suppressOnKeyDown) {\n        event.preventDefault()\n        onKeyDown()\n      }\n    },\n    [targetKey, onKeyDown, suppressOnKeyDown]\n  )\n\n  useEffect(() => {\n    window.addEventListener('keydown', downHandler)\n    return () => {\n      window.removeEventListener('keydown', downHandler)\n    }\n  }, [downHandler])\n}\n\nexport function useENSName(address) {\n  const { library } = useWeb3Context()\n\n  const [ENSName, setENSNname] = useState()\n\n  useEffect(() => {\n    if (isAddress(address)) {\n      let stale = false\n      library\n        .lookupAddress(address)\n        .then(name => {\n          if (!stale) {\n            if (name) {\n              setENSNname(name)\n            } else {\n              setENSNname(null)\n            }\n          }\n        })\n        .catch(() => {\n          if (!stale) {\n            setENSNname(null)\n          }\n        })\n\n      return () => {\n        stale = true\n        setENSNname()\n      }\n    }\n  }, [library, address])\n\n  return ENSName\n}\n\n// returns null on errors\nexport function useContract(address, ABI, withSignerIfPossible = true) {\n  const { library, account } = useWeb3Context()\n\n  return useMemo(() => {\n    try {\n      return getContract(address, ABI, library, withSignerIfPossible ? account : undefined)\n    } catch {\n      return null\n    }\n  }, [address, ABI, library, withSignerIfPossible, account])\n}\n\n// returns null on errors\nexport function useTokenContract(tokenAddress, withSignerIfPossible = true) {\n  const { library, account } = useWeb3Context()\n\n  return useMemo(() => {\n    try {\n      return getContract(tokenAddress, ERC20_ABI, library, withSignerIfPossible ? account : undefined)\n    } catch {\n      return null\n    }\n  }, [tokenAddress, library, withSignerIfPossible, account])\n}\n\n// returns null on errors\nexport function useFactoryContract(withSignerIfPossible = true) {\n  const { networkId, library, account } = useWeb3Context()\n\n  return useMemo(() => {\n    try {\n      return getFactoryContract(networkId, library, withSignerIfPossible ? account : undefined)\n    } catch {\n      return null\n    }\n  }, [networkId, library, withSignerIfPossible, account])\n}\n\nexport function useExchangeContract(exchangeAddress, withSignerIfPossible = true) {\n  const { library, account } = useWeb3Context()\n\n  return useMemo(() => {\n    try {\n      return getExchangeContract(exchangeAddress, library, withSignerIfPossible ? account : undefined)\n    } catch {\n      return null\n    }\n  }, [exchangeAddress, library, withSignerIfPossible, account])\n}\n\nexport function useCopyClipboard(timeout = 500) {\n  const [isCopied, setIsCopied] = useState(false)\n\n  const staticCopy = useCallback(text => {\n    const didCopy = copy(text)\n    setIsCopied(didCopy)\n  }, [])\n\n  useEffect(() => {\n    if (isCopied) {\n      const hide = setTimeout(() => {\n        setIsCopied(false)\n      }, timeout)\n\n      return () => {\n        clearTimeout(hide)\n      }\n    }\n  }, [isCopied, setIsCopied, timeout])\n\n  return [isCopied, staticCopy]\n}\n"]},"metadata":{},"sourceType":"module"}