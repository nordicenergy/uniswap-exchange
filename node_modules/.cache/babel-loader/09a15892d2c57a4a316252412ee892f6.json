{"ast":null,"code":"var _jsxFileName = \"/workspace/uniswap-exchange/src/components/WalletModal/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport ReactGA from 'react-ga';\nimport styled from 'styled-components';\nimport { isMobile } from 'react-device-detect';\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core';\nimport { URI_AVAILABLE } from '@web3-react/walletconnect-connector';\nimport Modal from '../Modal';\nimport AccountDetails from '../AccountDetails';\nimport PendingView from './PendingView';\nimport Option from './Option';\nimport { SUPPORTED_WALLETS } from '../../constants';\nimport { usePrevious } from '../../hooks';\nimport { Link } from '../../theme';\nimport MetamaskIcon from '../../assets/images/metamask.png';\nimport { ReactComponent as Close } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/images/x.svg\";\nimport { injected, walletconnect, fortmatic, portis } from '../../connectors';\nimport { useWalletModalToggle, useWalletModalOpen } from '../../contexts/Application';\nimport { OVERLAY_READY } from '../../connectors/Fortmatic';\nconst CloseIcon = styled.div`\n  position: absolute;\n  right: 1rem;\n  top: 14px;\n  &:hover {\n    cursor: pointer;\n    opacity: 0.6;\n  }\n`;\nconst CloseColor = styled(Close)`\n  path {\n    stroke: ${({\n  theme\n}) => theme.chaliceGray};\n  }\n`;\nconst Wrapper = styled.div`\n  ${({\n  theme\n}) => theme.flexColumnNoWrap}\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  background-color: ${({\n  theme\n}) => theme.backgroundColor};\n`;\nconst HeaderRow = styled.div`\n  ${({\n  theme\n}) => theme.flexRowNoWrap};\n  padding: 1.5rem 1.5rem;\n  font-weight: 500;\n  color: ${props => props.color === 'blue' ? ({\n  theme\n}) => theme.royalBlue : 'inherit'};\n  ${({\n  theme\n}) => theme.mediaWidth.upToMedium`\n    padding: 1rem;\n  `};\n`;\nconst ContentWrapper = styled.div`\n  background-color: ${({\n  theme\n}) => theme.backgroundColor};\n  padding: 2rem;\n  ${({\n  theme\n}) => theme.mediaWidth.upToMedium`padding: 1rem`};\n`;\nconst UpperSection = styled.div`\n  position: relative;\n  background-color: ${({\n  theme\n}) => theme.concreteGray};\n\n  h5 {\n    margin: 0;\n    margin-bottom: 0.5rem;\n    font-size: 1rem;\n    font-weight: 400;\n  }\n\n  h5:last-child {\n    margin-bottom: 0px;\n  }\n\n  h4 {\n    margin-top: 0;\n    font-weight: 500;\n  }\n`;\nconst Blurb = styled.div`\n  ${({\n  theme\n}) => theme.flexRowNoWrap}\n  align-items: center;\n  justify-content: center;\n  margin-top: 2rem;\n  ${({\n  theme\n}) => theme.mediaWidth.upToMedium`\n    margin: 1rem;\n    font-size: 12px;\n  `};\n`;\nconst OptionGrid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 10px;\n  ${({\n  theme\n}) => theme.mediaWidth.upToMedium`\n    grid-template-columns: 1fr;\n    grid-gap: 10px;\n  `};\n`;\nconst HoverText = styled.div`\n  :hover {\n    cursor: pointer;\n  }\n`;\nconst WALLET_VIEWS = {\n  OPTIONS: 'options',\n  OPTIONS_SECONDARY: 'options_secondary',\n  ACCOUNT: 'account',\n  PENDING: 'pending'\n};\nexport default function WalletModal({\n  pendingTransactions,\n  confirmedTransactions,\n  ENSName\n}) {\n  const {\n    active,\n    account,\n    connector,\n    activate,\n    error\n  } = useWeb3React();\n  const [walletView, setWalletView] = useState(WALLET_VIEWS.ACCOUNT);\n  const [pendingWallet, setPendingWallet] = useState();\n  const [pendingError, setPendingError] = useState();\n  const walletModalOpen = useWalletModalOpen();\n  const toggleWalletModal = useWalletModalToggle(); // always reset to account view\n\n  useEffect(() => {\n    if (walletModalOpen) {\n      setPendingError(false);\n      setWalletView(WALLET_VIEWS.ACCOUNT);\n    }\n  }, [walletModalOpen]); // set up uri listener for walletconnect\n\n  const [uri, setUri] = useState();\n  useEffect(() => {\n    const activateWC = uri => {\n      setUri(uri); // setWalletView(WALLET_VIEWS.PENDING)\n    };\n\n    walletconnect.on(URI_AVAILABLE, activateWC);\n    return () => {\n      walletconnect.off(URI_AVAILABLE, activateWC);\n    };\n  }, []); // close modal when a connection is successful\n\n  const activePrevious = usePrevious(active);\n  const connectorPrevious = usePrevious(connector);\n  useEffect(() => {\n    if (walletModalOpen && (active && !activePrevious || connector && connector !== connectorPrevious && !error)) {\n      setWalletView(WALLET_VIEWS.ACCOUNT);\n    }\n  }, [setWalletView, active, error, connector, walletModalOpen, activePrevious, connectorPrevious]);\n\n  const tryActivation = async connector => {\n    let name = '';\n    Object.keys(SUPPORTED_WALLETS).map(key => {\n      if (connector === SUPPORTED_WALLETS[key].connector) {\n        return name = SUPPORTED_WALLETS[key].name;\n      }\n\n      return true;\n    }); // log selected wallet\n\n    ReactGA.event({\n      category: 'Wallet',\n      action: 'Change Wallet',\n      label: name\n    });\n    setPendingWallet(connector); // set wallet for pending view\n\n    setWalletView(WALLET_VIEWS.PENDING);\n    activate(connector, undefined, true).catch(error => {\n      if (error instanceof UnsupportedChainIdError) {\n        activate(connector); // a little janky...can't use setError because the connector isn't set\n      } else {\n        setPendingError(true);\n      }\n    });\n  }; // close wallet modal if fortmatic modal is active\n\n\n  useEffect(() => {\n    fortmatic.on(OVERLAY_READY, () => {\n      toggleWalletModal();\n    });\n  }, [toggleWalletModal]); // get wallets user can switch too, depending on device/browser\n\n  function getOptions() {\n    const isMetamask = window.ethereum && window.ethereum.isMetaMask;\n    return Object.keys(SUPPORTED_WALLETS).map(key => {\n      const option = SUPPORTED_WALLETS[key]; // check for mobile options\n\n      if (isMobile) {\n        //disable portis on mobile for now\n        if (option.connector === portis) {\n          return null;\n        }\n\n        if (!window.web3 && !window.ethereum && option.mobile) {\n          return React.createElement(Option, {\n            onClick: () => {\n              option.connector !== connector && !option.href && tryActivation(option.connector);\n            },\n            key: key,\n            active: option.connector && option.connector === connector,\n            color: option.color,\n            link: option.href,\n            header: option.name,\n            subheader: null,\n            icon: require('../../assets/images/' + option.iconName),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 204\n            },\n            __self: this\n          });\n        }\n\n        return null;\n      } // overwrite injected when needed\n\n\n      if (option.connector === injected) {\n        // don't show injected if there's no injected provider\n        if (!(window.web3 || window.ethereum)) {\n          if (option.name === 'MetaMask') {\n            return React.createElement(Option, {\n              key: key,\n              color: '#E8831D',\n              header: 'Install Metamask',\n              subheader: null,\n              link: 'https://metamask.io/',\n              icon: MetamaskIcon,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 227\n              },\n              __self: this\n            });\n          } else {\n            return null; //dont want to return install twice\n          }\n        } // don't return metamask if injected provider isn't metamask\n        else if (option.name === 'MetaMask' && !isMetamask) {\n            return null;\n          } // likewise for generic\n          else if (option.name === 'Injected' && isMetamask) {\n              return null;\n            }\n      } // return rest of options\n\n\n      return !isMobile && !option.mobileOnly && React.createElement(Option, {\n        onClick: () => {\n          option.connector === connector ? setWalletView(WALLET_VIEWS.ACCOUNT) : !option.href && tryActivation(option.connector);\n        },\n        key: key,\n        active: option.connector === connector,\n        color: option.color,\n        link: option.href,\n        header: option.name,\n        subheader: null //use option.descriptio to bring back multi-line\n        ,\n        icon: require('../../assets/images/' + option.iconName),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      });\n    });\n  }\n\n  function getModalContent() {\n    if (error) {\n      return React.createElement(UpperSection, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(CloseIcon, {\n        onClick: toggleWalletModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, React.createElement(CloseColor, {\n        alt: 'close icon',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      })), React.createElement(HeaderRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, error instanceof UnsupportedChainIdError ? 'Wrong Network' : 'Error connecting'), React.createElement(ContentWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, error instanceof UnsupportedChainIdError ? React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, \"Please connect to the main Ethereum network.\") : 'Error connecting. Try refreshing the page.'));\n    }\n\n    if (account && walletView === WALLET_VIEWS.ACCOUNT) {\n      return React.createElement(AccountDetails, {\n        toggleWalletModal: toggleWalletModal,\n        pendingTransactions: pendingTransactions,\n        confirmedTransactions: confirmedTransactions,\n        ENSName: ENSName,\n        openOptions: () => setWalletView(WALLET_VIEWS.OPTIONS),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(UpperSection, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, React.createElement(CloseIcon, {\n      onClick: toggleWalletModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }, React.createElement(CloseColor, {\n      alt: 'close icon',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    })), walletView !== WALLET_VIEWS.ACCOUNT ? React.createElement(HeaderRow, {\n      color: \"blue\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }, React.createElement(HoverText, {\n      onClick: () => {\n        setPendingError(false);\n        setWalletView(WALLET_VIEWS.ACCOUNT);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }, \"Back\")) : React.createElement(HeaderRow, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }, React.createElement(HoverText, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }, \"Connect To A Wallet\")), React.createElement(ContentWrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }, walletView === WALLET_VIEWS.PENDING ? React.createElement(PendingView, {\n      uri: uri,\n      size: 220,\n      connector: pendingWallet,\n      error: pendingError,\n      setPendingError: setPendingError,\n      tryActivation: tryActivation,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }) : React.createElement(OptionGrid, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }, getOptions()), walletView !== WALLET_VIEWS.PENDING && React.createElement(Blurb, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }, \"New to Ethereum? \\xA0\"), ' ', React.createElement(Link, {\n      href: \"https://ethereum.org/use/#3-what-is-a-wallet-and-which-one-should-i-use\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    }, \"Learn more about wallets\"))));\n  }\n\n  return React.createElement(Modal, {\n    style: {\n      userSelect: 'none'\n    },\n    isOpen: walletModalOpen,\n    onDismiss: toggleWalletModal,\n    minHeight: null,\n    maxHeight: 90,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350\n    },\n    __self: this\n  }, React.createElement(Wrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357\n    },\n    __self: this\n  }, getModalContent()));\n}","map":{"version":3,"sources":["/workspace/uniswap-exchange/src/components/WalletModal/index.js"],"names":["React","useState","useEffect","ReactGA","styled","isMobile","useWeb3React","UnsupportedChainIdError","URI_AVAILABLE","Modal","AccountDetails","PendingView","Option","SUPPORTED_WALLETS","usePrevious","Link","MetamaskIcon","injected","walletconnect","fortmatic","portis","useWalletModalToggle","useWalletModalOpen","OVERLAY_READY","CloseIcon","div","CloseColor","Close","theme","chaliceGray","Wrapper","flexColumnNoWrap","backgroundColor","HeaderRow","flexRowNoWrap","props","color","royalBlue","mediaWidth","upToMedium","ContentWrapper","UpperSection","concreteGray","Blurb","OptionGrid","HoverText","WALLET_VIEWS","OPTIONS","OPTIONS_SECONDARY","ACCOUNT","PENDING","WalletModal","pendingTransactions","confirmedTransactions","ENSName","active","account","connector","activate","error","walletView","setWalletView","pendingWallet","setPendingWallet","pendingError","setPendingError","walletModalOpen","toggleWalletModal","uri","setUri","activateWC","on","off","activePrevious","connectorPrevious","tryActivation","name","Object","keys","map","key","event","category","action","label","undefined","catch","getOptions","isMetamask","window","ethereum","isMetaMask","option","web3","mobile","href","require","iconName","mobileOnly","getModalContent","userSelect"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport ReactGA from 'react-ga'\nimport styled from 'styled-components'\nimport { isMobile } from 'react-device-detect'\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\nimport { URI_AVAILABLE } from '@web3-react/walletconnect-connector'\n\nimport Modal from '../Modal'\nimport AccountDetails from '../AccountDetails'\nimport PendingView from './PendingView'\nimport Option from './Option'\nimport { SUPPORTED_WALLETS } from '../../constants'\nimport { usePrevious } from '../../hooks'\nimport { Link } from '../../theme'\nimport MetamaskIcon from '../../assets/images/metamask.png'\nimport { ReactComponent as Close } from '../../assets/images/x.svg'\nimport { injected, walletconnect, fortmatic, portis } from '../../connectors'\nimport { useWalletModalToggle, useWalletModalOpen } from '../../contexts/Application'\nimport { OVERLAY_READY } from '../../connectors/Fortmatic'\n\nconst CloseIcon = styled.div`\n  position: absolute;\n  right: 1rem;\n  top: 14px;\n  &:hover {\n    cursor: pointer;\n    opacity: 0.6;\n  }\n`\n\nconst CloseColor = styled(Close)`\n  path {\n    stroke: ${({ theme }) => theme.chaliceGray};\n  }\n`\n\nconst Wrapper = styled.div`\n  ${({ theme }) => theme.flexColumnNoWrap}\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  background-color: ${({ theme }) => theme.backgroundColor};\n`\n\nconst HeaderRow = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap};\n  padding: 1.5rem 1.5rem;\n  font-weight: 500;\n  color: ${props => (props.color === 'blue' ? ({ theme }) => theme.royalBlue : 'inherit')};\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    padding: 1rem;\n  `};\n`\n\nconst ContentWrapper = styled.div`\n  background-color: ${({ theme }) => theme.backgroundColor};\n  padding: 2rem;\n  ${({ theme }) => theme.mediaWidth.upToMedium`padding: 1rem`};\n`\n\nconst UpperSection = styled.div`\n  position: relative;\n  background-color: ${({ theme }) => theme.concreteGray};\n\n  h5 {\n    margin: 0;\n    margin-bottom: 0.5rem;\n    font-size: 1rem;\n    font-weight: 400;\n  }\n\n  h5:last-child {\n    margin-bottom: 0px;\n  }\n\n  h4 {\n    margin-top: 0;\n    font-weight: 500;\n  }\n`\n\nconst Blurb = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap}\n  align-items: center;\n  justify-content: center;\n  margin-top: 2rem;\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    margin: 1rem;\n    font-size: 12px;\n  `};\n`\n\nconst OptionGrid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 10px;\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    grid-template-columns: 1fr;\n    grid-gap: 10px;\n  `};\n`\n\nconst HoverText = styled.div`\n  :hover {\n    cursor: pointer;\n  }\n`\n\nconst WALLET_VIEWS = {\n  OPTIONS: 'options',\n  OPTIONS_SECONDARY: 'options_secondary',\n  ACCOUNT: 'account',\n  PENDING: 'pending'\n}\n\nexport default function WalletModal({ pendingTransactions, confirmedTransactions, ENSName }) {\n  const { active, account, connector, activate, error } = useWeb3React()\n\n  const [walletView, setWalletView] = useState(WALLET_VIEWS.ACCOUNT)\n\n  const [pendingWallet, setPendingWallet] = useState()\n\n  const [pendingError, setPendingError] = useState()\n\n  const walletModalOpen = useWalletModalOpen()\n  const toggleWalletModal = useWalletModalToggle()\n\n  // always reset to account view\n  useEffect(() => {\n    if (walletModalOpen) {\n      setPendingError(false)\n      setWalletView(WALLET_VIEWS.ACCOUNT)\n    }\n  }, [walletModalOpen])\n\n  // set up uri listener for walletconnect\n  const [uri, setUri] = useState()\n  useEffect(() => {\n    const activateWC = uri => {\n      setUri(uri)\n      // setWalletView(WALLET_VIEWS.PENDING)\n    }\n    walletconnect.on(URI_AVAILABLE, activateWC)\n    return () => {\n      walletconnect.off(URI_AVAILABLE, activateWC)\n    }\n  }, [])\n\n  // close modal when a connection is successful\n  const activePrevious = usePrevious(active)\n  const connectorPrevious = usePrevious(connector)\n  useEffect(() => {\n    if (walletModalOpen && ((active && !activePrevious) || (connector && connector !== connectorPrevious && !error))) {\n      setWalletView(WALLET_VIEWS.ACCOUNT)\n    }\n  }, [setWalletView, active, error, connector, walletModalOpen, activePrevious, connectorPrevious])\n\n  const tryActivation = async connector => {\n    let name = ''\n    Object.keys(SUPPORTED_WALLETS).map(key => {\n      if (connector === SUPPORTED_WALLETS[key].connector) {\n        return (name = SUPPORTED_WALLETS[key].name)\n      }\n      return true\n    })\n    // log selected wallet\n    ReactGA.event({\n      category: 'Wallet',\n      action: 'Change Wallet',\n      label: name\n    })\n    setPendingWallet(connector) // set wallet for pending view\n    setWalletView(WALLET_VIEWS.PENDING)\n    activate(connector, undefined, true).catch(error => {\n      if (error instanceof UnsupportedChainIdError) {\n        activate(connector) // a little janky...can't use setError because the connector isn't set\n      } else {\n        setPendingError(true)\n      }\n    })\n  }\n\n  // close wallet modal if fortmatic modal is active\n  useEffect(() => {\n    fortmatic.on(OVERLAY_READY, () => {\n      toggleWalletModal()\n    })\n  }, [toggleWalletModal])\n\n  // get wallets user can switch too, depending on device/browser\n  function getOptions() {\n    const isMetamask = window.ethereum && window.ethereum.isMetaMask\n    return Object.keys(SUPPORTED_WALLETS).map(key => {\n      const option = SUPPORTED_WALLETS[key]\n      // check for mobile options\n      if (isMobile) {\n        //disable portis on mobile for now\n        if (option.connector === portis) {\n          return null\n        }\n\n        if (!window.web3 && !window.ethereum && option.mobile) {\n          return (\n            <Option\n              onClick={() => {\n                option.connector !== connector && !option.href && tryActivation(option.connector)\n              }}\n              key={key}\n              active={option.connector && option.connector === connector}\n              color={option.color}\n              link={option.href}\n              header={option.name}\n              subheader={null}\n              icon={require('../../assets/images/' + option.iconName)}\n            />\n          )\n        }\n        return null\n      }\n\n      // overwrite injected when needed\n      if (option.connector === injected) {\n        // don't show injected if there's no injected provider\n        if (!(window.web3 || window.ethereum)) {\n          if (option.name === 'MetaMask') {\n            return (\n              <Option\n                key={key}\n                color={'#E8831D'}\n                header={'Install Metamask'}\n                subheader={null}\n                link={'https://metamask.io/'}\n                icon={MetamaskIcon}\n              />\n            )\n          } else {\n            return null //dont want to return install twice\n          }\n        }\n        // don't return metamask if injected provider isn't metamask\n        else if (option.name === 'MetaMask' && !isMetamask) {\n          return null\n        }\n        // likewise for generic\n        else if (option.name === 'Injected' && isMetamask) {\n          return null\n        }\n      }\n\n      // return rest of options\n      return (\n        !isMobile &&\n        !option.mobileOnly && (\n          <Option\n            onClick={() => {\n              option.connector === connector\n                ? setWalletView(WALLET_VIEWS.ACCOUNT)\n                : !option.href && tryActivation(option.connector)\n            }}\n            key={key}\n            active={option.connector === connector}\n            color={option.color}\n            link={option.href}\n            header={option.name}\n            subheader={null} //use option.descriptio to bring back multi-line\n            icon={require('../../assets/images/' + option.iconName)}\n          />\n        )\n      )\n    })\n  }\n\n  function getModalContent() {\n    if (error) {\n      return (\n        <UpperSection>\n          <CloseIcon onClick={toggleWalletModal}>\n            <CloseColor alt={'close icon'} />\n          </CloseIcon>\n          <HeaderRow>{error instanceof UnsupportedChainIdError ? 'Wrong Network' : 'Error connecting'}</HeaderRow>\n          <ContentWrapper>\n            {error instanceof UnsupportedChainIdError ? (\n              <h5>Please connect to the main Ethereum network.</h5>\n            ) : (\n              'Error connecting. Try refreshing the page.'\n            )}\n          </ContentWrapper>\n        </UpperSection>\n      )\n    }\n    if (account && walletView === WALLET_VIEWS.ACCOUNT) {\n      return (\n        <AccountDetails\n          toggleWalletModal={toggleWalletModal}\n          pendingTransactions={pendingTransactions}\n          confirmedTransactions={confirmedTransactions}\n          ENSName={ENSName}\n          openOptions={() => setWalletView(WALLET_VIEWS.OPTIONS)}\n        />\n      )\n    }\n    return (\n      <UpperSection>\n        <CloseIcon onClick={toggleWalletModal}>\n          <CloseColor alt={'close icon'} />\n        </CloseIcon>\n        {walletView !== WALLET_VIEWS.ACCOUNT ? (\n          <HeaderRow color=\"blue\">\n            <HoverText\n              onClick={() => {\n                setPendingError(false)\n                setWalletView(WALLET_VIEWS.ACCOUNT)\n              }}\n            >\n              Back\n            </HoverText>\n          </HeaderRow>\n        ) : (\n          <HeaderRow>\n            <HoverText>Connect To A Wallet</HoverText>\n          </HeaderRow>\n        )}\n        <ContentWrapper>\n          {walletView === WALLET_VIEWS.PENDING ? (\n            <PendingView\n              uri={uri}\n              size={220}\n              connector={pendingWallet}\n              error={pendingError}\n              setPendingError={setPendingError}\n              tryActivation={tryActivation}\n            />\n          ) : (\n            <OptionGrid>{getOptions()}</OptionGrid>\n          )}\n          {walletView !== WALLET_VIEWS.PENDING && (\n            <Blurb>\n              <span>New to Ethereum? &nbsp;</span>{' '}\n              <Link href=\"https://ethereum.org/use/#3-what-is-a-wallet-and-which-one-should-i-use\">\n                Learn more about wallets\n              </Link>\n            </Blurb>\n          )}\n        </ContentWrapper>\n      </UpperSection>\n    )\n  }\n\n  return (\n    <Modal\n      style={{ userSelect: 'none' }}\n      isOpen={walletModalOpen}\n      onDismiss={toggleWalletModal}\n      minHeight={null}\n      maxHeight={90}\n    >\n      <Wrapper>{getModalContent()}</Wrapper>\n    </Modal>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}